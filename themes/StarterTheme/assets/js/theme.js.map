{"version":3,"sources":["webpack:///theme.js","webpack:///webpack/bootstrap 84182f969099a8569d35","webpack:///./js/theme.js","webpack:///external \"$\"","webpack:///external \"prestashop\"","webpack:///(webpack)/~/node-libs-browser/~/events/events.js","webpack:///./js/setup-rivets.js","webpack:///./~/rivets/dist/rivets.js","webpack:///(webpack)/buildin/module.js","webpack:///./~/rivets/~/sightglass/index.js","webpack:///./js/checkout.js","webpack:///./js/product-navigation.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_jquery","_jquery2","_prestashop","_prestashop2","_events","_events2","i","prototype","document","ready","show","hide","$","prestashop","EventEmitter","this","_maxListeners","undefined","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","n","isNaN","TypeError","emit","type","er","handler","len","args","listeners","error","length","arguments","Error","Array","slice","apply","addListener","listener","newListener","push","warned","console","trace","on","once","g","removeListener","fired","list","position","splice","removeAllListeners","key","ret","listenerCount","evlistener","emitter","_rivets","_rivets2","configure","prefix","templateDelimiters","formatters","propertyList","_results","customerAddress","address","customer","addresses","formatted","window","view","bind","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","Rivets","bindMethod","unbindMethod","_ref","__bind","fn","me","__slice","__hasProp","hasOwnProperty","__extends","child","parent","ctor","constructor","__super__","__indexOf","indexOf","item","l","options","extensions","public","binders","components","adapters","rootInterface","preloadData","context","ev","binding","models","descriptor","option","value","el","View","init","component","data","scope","createElement","innerHTML","template","initialize","jQuery","Util","bindEvent","event","unbindEvent","getInputValue","$el","attr","is","val","addEventListener","attachEvent","removeEventListener","detachEvent","o","_i","_len","checked","selected","TypeParser","types","primitive","keypath","parse","string","test","Number","TextTemplateParser","text","delimiters","index","lastIndex","lastToken","substring","tokens","trim","els","k","v","_base","_j","_len1","_ref1","_ref2","_ref3","_ref4","_ref5","update","publish","sync","unbind","select","traverse","build","buildBinding","bindingRegExp","jquery","concat","RegExp","node","declaration","ctx","dependencies","pipe","pipes","split","shift","bindings","_this","block","childNode","parser","token","nodeType","createTextNode","parentNode","insertBefore","removeChild","_k","_results1","childNodes","sort","a","b","binder","priority","attribute","attributes","identifier","regexp","nodeName","name","replace","toLowerCase","_bound","ComponentBinding","publishes","model","Binding","getValue","set","eventHandler","formattedValue","parseTarget","observe","setBinder","formatterObservers","exec","Function","routine","callback","sightglass","root","observer","target","ai","fi","formatter","processedArgs","match","read","dependency","unobserve","reverse","setValue","_super","propertyName","locals","observers","upstreamObservers","camelCase","result","grouped","toUpperCase","_ref6","_ref7","bound","componentView","TextBinding","textContent","innerText","html","style","display","enabled","disabled","toString","unchecked","tagName","setAttribute","marker","join","getAttribute","createComment","removeAttribute","nested","nextSibling","unless","function","iterated","collection","modelName","previous","_len2","pop","cloneNode","elClass","className","counter","weakmap","weakReference","_name","Object","defineProperty","callbacks","cleanupWeakReference","ref","keys","pointers","stubFunction","map","original","r","response","observeMutations","functions","isArray","unobserveMutations","idx","desc","getOwnPropertyDescriptor","get","enumerable","newValue","factory","_","rivets","webpackPolyfill","deprecate","paths","children","Observer","objectPath","realize","message","tokenize","interfaces","chr","current","path","charAt","substr","prev","unreached","forEach","next","oldValue","adapter","active","action","setupRegularCheckout","hideSubmitButton","refreshPaymentOptions","params","serialize","post","then","resp","replaceWith","refreshDeliveryOptions","setupAdvancedCheckout","getSelectedPaymentOption","enableOrDisableOrderButton","each","checkbox","confirmPayment","submit","replaceProducts","refreshProducts","extraParams","url","location","href","products","history","pushState","query_url","onpopstate","e","state","preventDefault","page"],"mappings":"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","file":"theme.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _prestashop = __webpack_require__(3);\n\t\n\tvar _prestashop2 = _interopRequireDefault(_prestashop);\n\t\n\tvar _events = __webpack_require__(4);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\t// \"inherit\" EventEmitter\n\t\n\t__webpack_require__(5);\n\t\n\t__webpack_require__(9);\n\t\n\t__webpack_require__(10);\n\t\n\tfor (var i in _events2['default'].prototype) {\n\t    _prestashop2['default'][i] = _events2['default'].prototype[i];\n\t}\n\t\n\t(0, _jquery2['default'])(document).ready(function () {\n\t    (0, _jquery2['default'])('.ps-shown-by-js').show();\n\t    (0, _jquery2['default'])('.ps-hidden-by-js').hide();\n\t});\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = $;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = prestashop;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\t'use strict';\n\t\n\tfunction EventEmitter() {\n\t  this._events = this._events || {};\n\t  this._maxListeners = this._maxListeners || undefined;\n\t}\n\tmodule.exports = EventEmitter;\n\t\n\t// Backwards-compat with node 0.10.x\n\tEventEmitter.EventEmitter = EventEmitter;\n\t\n\tEventEmitter.prototype._events = undefined;\n\tEventEmitter.prototype._maxListeners = undefined;\n\t\n\t// By default EventEmitters will print a warning if more than 10 listeners are\n\t// added to it. This is a useful default which helps finding memory leaks.\n\tEventEmitter.defaultMaxListeners = 10;\n\t\n\t// Obviously not all Emitters should be limited to 10. This function allows\n\t// that to be increased. Set to zero for unlimited.\n\tEventEmitter.prototype.setMaxListeners = function (n) {\n\t  if (!isNumber(n) || n < 0 || isNaN(n)) throw TypeError('n must be a positive number');\n\t  this._maxListeners = n;\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.emit = function (type) {\n\t  var er, handler, len, args, i, listeners;\n\t\n\t  if (!this._events) this._events = {};\n\t\n\t  // If there is no 'error' event listener then throw.\n\t  if (type === 'error') {\n\t    if (!this._events.error || isObject(this._events.error) && !this._events.error.length) {\n\t      er = arguments[1];\n\t      if (er instanceof Error) {\n\t        throw er; // Unhandled 'error' event\n\t      }\n\t      throw TypeError('Uncaught, unspecified \"error\" event.');\n\t    }\n\t  }\n\t\n\t  handler = this._events[type];\n\t\n\t  if (isUndefined(handler)) return false;\n\t\n\t  if (isFunction(handler)) {\n\t    switch (arguments.length) {\n\t      // fast cases\n\t      case 1:\n\t        handler.call(this);\n\t        break;\n\t      case 2:\n\t        handler.call(this, arguments[1]);\n\t        break;\n\t      case 3:\n\t        handler.call(this, arguments[1], arguments[2]);\n\t        break;\n\t      // slower\n\t      default:\n\t        args = Array.prototype.slice.call(arguments, 1);\n\t        handler.apply(this, args);\n\t    }\n\t  } else if (isObject(handler)) {\n\t    args = Array.prototype.slice.call(arguments, 1);\n\t    listeners = handler.slice();\n\t    len = listeners.length;\n\t    for (i = 0; i < len; i++) listeners[i].apply(this, args);\n\t  }\n\t\n\t  return true;\n\t};\n\t\n\tEventEmitter.prototype.addListener = function (type, listener) {\n\t  var m;\n\t\n\t  if (!isFunction(listener)) throw TypeError('listener must be a function');\n\t\n\t  if (!this._events) this._events = {};\n\t\n\t  // To avoid recursion in the case that type === \"newListener\"! Before\n\t  // adding it to the listeners, first emit \"newListener\".\n\t  if (this._events.newListener) this.emit('newListener', type, isFunction(listener.listener) ? listener.listener : listener);\n\t\n\t  if (!this._events[type])\n\t    // Optimize the case of one listener. Don't need the extra array object.\n\t    this._events[type] = listener;else if (isObject(this._events[type]))\n\t    // If we've already got an array, just append.\n\t    this._events[type].push(listener);else\n\t    // Adding the second element, need to change to array.\n\t    this._events[type] = [this._events[type], listener];\n\t\n\t  // Check for listener leak\n\t  if (isObject(this._events[type]) && !this._events[type].warned) {\n\t    if (!isUndefined(this._maxListeners)) {\n\t      m = this._maxListeners;\n\t    } else {\n\t      m = EventEmitter.defaultMaxListeners;\n\t    }\n\t\n\t    if (m && m > 0 && this._events[type].length > m) {\n\t      this._events[type].warned = true;\n\t      console.error('(node) warning: possible EventEmitter memory ' + 'leak detected. %d listeners added. ' + 'Use emitter.setMaxListeners() to increase limit.', this._events[type].length);\n\t      if (typeof console.trace === 'function') {\n\t        // not supported in IE 10\n\t        console.trace();\n\t      }\n\t    }\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\t\n\tEventEmitter.prototype.once = function (type, listener) {\n\t  if (!isFunction(listener)) throw TypeError('listener must be a function');\n\t\n\t  var fired = false;\n\t\n\t  function g() {\n\t    this.removeListener(type, g);\n\t\n\t    if (!fired) {\n\t      fired = true;\n\t      listener.apply(this, arguments);\n\t    }\n\t  }\n\t\n\t  g.listener = listener;\n\t  this.on(type, g);\n\t\n\t  return this;\n\t};\n\t\n\t// emits a 'removeListener' event iff the listener was removed\n\tEventEmitter.prototype.removeListener = function (type, listener) {\n\t  var list, position, length, i;\n\t\n\t  if (!isFunction(listener)) throw TypeError('listener must be a function');\n\t\n\t  if (!this._events || !this._events[type]) return this;\n\t\n\t  list = this._events[type];\n\t  length = list.length;\n\t  position = -1;\n\t\n\t  if (list === listener || isFunction(list.listener) && list.listener === listener) {\n\t    delete this._events[type];\n\t    if (this._events.removeListener) this.emit('removeListener', type, listener);\n\t  } else if (isObject(list)) {\n\t    for (i = length; i-- > 0;) {\n\t      if (list[i] === listener || list[i].listener && list[i].listener === listener) {\n\t        position = i;\n\t        break;\n\t      }\n\t    }\n\t\n\t    if (position < 0) return this;\n\t\n\t    if (list.length === 1) {\n\t      list.length = 0;\n\t      delete this._events[type];\n\t    } else {\n\t      list.splice(position, 1);\n\t    }\n\t\n\t    if (this._events.removeListener) this.emit('removeListener', type, listener);\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.removeAllListeners = function (type) {\n\t  var key, listeners;\n\t\n\t  if (!this._events) return this;\n\t\n\t  // not listening for removeListener, no need to emit\n\t  if (!this._events.removeListener) {\n\t    if (arguments.length === 0) this._events = {};else if (this._events[type]) delete this._events[type];\n\t    return this;\n\t  }\n\t\n\t  // emit removeListener for all listeners on all events\n\t  if (arguments.length === 0) {\n\t    for (key in this._events) {\n\t      if (key === 'removeListener') continue;\n\t      this.removeAllListeners(key);\n\t    }\n\t    this.removeAllListeners('removeListener');\n\t    this._events = {};\n\t    return this;\n\t  }\n\t\n\t  listeners = this._events[type];\n\t\n\t  if (isFunction(listeners)) {\n\t    this.removeListener(type, listeners);\n\t  } else if (listeners) {\n\t    // LIFO order\n\t    while (listeners.length) this.removeListener(type, listeners[listeners.length - 1]);\n\t  }\n\t  delete this._events[type];\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.listeners = function (type) {\n\t  var ret;\n\t  if (!this._events || !this._events[type]) ret = [];else if (isFunction(this._events[type])) ret = [this._events[type]];else ret = this._events[type].slice();\n\t  return ret;\n\t};\n\t\n\tEventEmitter.prototype.listenerCount = function (type) {\n\t  if (this._events) {\n\t    var evlistener = this._events[type];\n\t\n\t    if (isFunction(evlistener)) return 1;else if (evlistener) return evlistener.length;\n\t  }\n\t  return 0;\n\t};\n\t\n\tEventEmitter.listenerCount = function (emitter, type) {\n\t  return emitter.listenerCount(type);\n\t};\n\t\n\tfunction isFunction(arg) {\n\t  return typeof arg === 'function';\n\t}\n\t\n\tfunction isNumber(arg) {\n\t  return typeof arg === 'number';\n\t}\n\t\n\tfunction isObject(arg) {\n\t  return typeof arg === 'object' && arg !== null;\n\t}\n\t\n\tfunction isUndefined(arg) {\n\t  return arg === void 0;\n\t}\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _rivets = __webpack_require__(6);\n\t\n\tvar _rivets2 = _interopRequireDefault(_rivets);\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _prestashop = __webpack_require__(3);\n\t\n\tvar _prestashop2 = _interopRequireDefault(_prestashop);\n\t\n\t_rivets2['default'].configure({\n\t  prefix: 'ps',\n\t  templateDelimiters: ['[[', ']]']\n\t});\n\t\n\t_rivets2['default'].formatters.propertyList = function (obj) {\n\t  var key, _results;\n\t  _results = [];\n\t  for (key in obj) {\n\t    _results.push(obj[key]);\n\t  }\n\t  return _results;\n\t};\n\t\n\t_rivets2['default'].formatters.customerAddress = function (obj) {\n\t  var address = _prestashop2['default'].customer.addresses[obj];\n\t  if (address) {\n\t    return address.formatted;\n\t  } else {\n\t    return undefined;\n\t  }\n\t};\n\t\n\t(0, _jquery2['default'])(document).ready(function () {\n\t  window.view = _rivets2['default'].bind((0, _jquery2['default'])('body'), {\n\t\n\t    prestashop: _prestashop2['default']\n\t\n\t  });\n\t});\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {// Rivets.js\n\t// version: 0.8.1\n\t// author: Michael Richards\n\t// license: MIT\n\t'use strict';\n\t\n\t(function () {\n\t  var Rivets,\n\t      bindMethod,\n\t      unbindMethod,\n\t      _ref,\n\t      __bind = function __bind(fn, me) {\n\t    return function () {\n\t      return fn.apply(me, arguments);\n\t    };\n\t  },\n\t      __slice = [].slice,\n\t      __hasProp = ({}).hasOwnProperty,\n\t      __extends = function __extends(child, parent) {\n\t    for (var key in parent) {\n\t      if (__hasProp.call(parent, key)) child[key] = parent[key];\n\t    }function ctor() {\n\t      this.constructor = child;\n\t    }ctor.prototype = parent.prototype;child.prototype = new ctor();child.__super__ = parent.prototype;return child;\n\t  },\n\t      __indexOf = [].indexOf || function (item) {\n\t    for (var i = 0, l = this.length; i < l; i++) {\n\t      if (i in this && this[i] === item) return i;\n\t    }return -1;\n\t  };\n\t\n\t  Rivets = {\n\t    options: ['prefix', 'templateDelimiters', 'rootInterface', 'preloadData', 'handler'],\n\t    extensions: ['binders', 'formatters', 'components', 'adapters'],\n\t    \"public\": {\n\t      binders: {},\n\t      components: {},\n\t      formatters: {},\n\t      adapters: {},\n\t      prefix: 'rv',\n\t      templateDelimiters: ['{', '}'],\n\t      rootInterface: '.',\n\t      preloadData: true,\n\t      handler: function handler(context, ev, binding) {\n\t        return this.call(context, ev, binding.view.models);\n\t      },\n\t      configure: function configure(options) {\n\t        var descriptor, key, option, value;\n\t        if (options == null) {\n\t          options = {};\n\t        }\n\t        for (option in options) {\n\t          value = options[option];\n\t          if (option === 'binders' || option === 'components' || option === 'formatters' || option === 'adapters') {\n\t            for (key in value) {\n\t              descriptor = value[key];\n\t              Rivets[option][key] = descriptor;\n\t            }\n\t          } else {\n\t            Rivets[\"public\"][option] = value;\n\t          }\n\t        }\n\t      },\n\t      bind: function bind(el, models, options) {\n\t        var view;\n\t        if (models == null) {\n\t          models = {};\n\t        }\n\t        if (options == null) {\n\t          options = {};\n\t        }\n\t        view = new Rivets.View(el, models, options);\n\t        view.bind();\n\t        return view;\n\t      },\n\t      init: function init(component, el, data) {\n\t        var scope, view;\n\t        if (data == null) {\n\t          data = {};\n\t        }\n\t        if (el == null) {\n\t          el = document.createElement('div');\n\t        }\n\t        component = Rivets[\"public\"].components[component];\n\t        el.innerHTML = component.template.call(this, el);\n\t        scope = component.initialize.call(this, el, data);\n\t        view = new Rivets.View(el, scope);\n\t        view.bind();\n\t        return view;\n\t      }\n\t    }\n\t  };\n\t\n\t  if (window['jQuery'] || window['$']) {\n\t    _ref = 'on' in jQuery.prototype ? ['on', 'off'] : ['bind', 'unbind'], bindMethod = _ref[0], unbindMethod = _ref[1];\n\t    Rivets.Util = {\n\t      bindEvent: function bindEvent(el, event, handler) {\n\t        return jQuery(el)[bindMethod](event, handler);\n\t      },\n\t      unbindEvent: function unbindEvent(el, event, handler) {\n\t        return jQuery(el)[unbindMethod](event, handler);\n\t      },\n\t      getInputValue: function getInputValue(el) {\n\t        var $el;\n\t        $el = jQuery(el);\n\t        if ($el.attr('type') === 'checkbox') {\n\t          return $el.is(':checked');\n\t        } else {\n\t          return $el.val();\n\t        }\n\t      }\n\t    };\n\t  } else {\n\t    Rivets.Util = {\n\t      bindEvent: (function () {\n\t        if ('addEventListener' in window) {\n\t          return function (el, event, handler) {\n\t            return el.addEventListener(event, handler, false);\n\t          };\n\t        }\n\t        return function (el, event, handler) {\n\t          return el.attachEvent('on' + event, handler);\n\t        };\n\t      })(),\n\t      unbindEvent: (function () {\n\t        if ('removeEventListener' in window) {\n\t          return function (el, event, handler) {\n\t            return el.removeEventListener(event, handler, false);\n\t          };\n\t        }\n\t        return function (el, event, handler) {\n\t          return el.detachEvent('on' + event, handler);\n\t        };\n\t      })(),\n\t      getInputValue: function getInputValue(el) {\n\t        var o, _i, _len, _results;\n\t        if (el.type === 'checkbox') {\n\t          return el.checked;\n\t        } else if (el.type === 'select-multiple') {\n\t          _results = [];\n\t          for (_i = 0, _len = el.length; _i < _len; _i++) {\n\t            o = el[_i];\n\t            if (o.selected) {\n\t              _results.push(o.value);\n\t            }\n\t          }\n\t          return _results;\n\t        } else {\n\t          return el.value;\n\t        }\n\t      }\n\t    };\n\t  }\n\t\n\t  Rivets.TypeParser = (function () {\n\t    function TypeParser() {}\n\t\n\t    TypeParser.types = {\n\t      primitive: 0,\n\t      keypath: 1\n\t    };\n\t\n\t    TypeParser.parse = function (string) {\n\t      if (/^'.*'$|^\".*\"$/.test(string)) {\n\t        return {\n\t          type: this.types.primitive,\n\t          value: string.slice(1, -1)\n\t        };\n\t      } else if (string === 'true') {\n\t        return {\n\t          type: this.types.primitive,\n\t          value: true\n\t        };\n\t      } else if (string === 'false') {\n\t        return {\n\t          type: this.types.primitive,\n\t          value: false\n\t        };\n\t      } else if (string === 'null') {\n\t        return {\n\t          type: this.types.primitive,\n\t          value: null\n\t        };\n\t      } else if (string === 'undefined') {\n\t        return {\n\t          type: this.types.primitive,\n\t          value: void 0\n\t        };\n\t      } else if (isNaN(Number(string)) === false) {\n\t        return {\n\t          type: this.types.primitive,\n\t          value: Number(string)\n\t        };\n\t      } else {\n\t        return {\n\t          type: this.types.keypath,\n\t          value: string\n\t        };\n\t      }\n\t    };\n\t\n\t    return TypeParser;\n\t  })();\n\t\n\t  Rivets.TextTemplateParser = (function () {\n\t    function TextTemplateParser() {}\n\t\n\t    TextTemplateParser.types = {\n\t      text: 0,\n\t      binding: 1\n\t    };\n\t\n\t    TextTemplateParser.parse = function (template, delimiters) {\n\t      var index, lastIndex, lastToken, length, substring, tokens, value;\n\t      tokens = [];\n\t      length = template.length;\n\t      index = 0;\n\t      lastIndex = 0;\n\t      while (lastIndex < length) {\n\t        index = template.indexOf(delimiters[0], lastIndex);\n\t        if (index < 0) {\n\t          tokens.push({\n\t            type: this.types.text,\n\t            value: template.slice(lastIndex)\n\t          });\n\t          break;\n\t        } else {\n\t          if (index > 0 && lastIndex < index) {\n\t            tokens.push({\n\t              type: this.types.text,\n\t              value: template.slice(lastIndex, index)\n\t            });\n\t          }\n\t          lastIndex = index + delimiters[0].length;\n\t          index = template.indexOf(delimiters[1], lastIndex);\n\t          if (index < 0) {\n\t            substring = template.slice(lastIndex - delimiters[1].length);\n\t            lastToken = tokens[tokens.length - 1];\n\t            if ((lastToken != null ? lastToken.type : void 0) === this.types.text) {\n\t              lastToken.value += substring;\n\t            } else {\n\t              tokens.push({\n\t                type: this.types.text,\n\t                value: substring\n\t              });\n\t            }\n\t            break;\n\t          }\n\t          value = template.slice(lastIndex, index).trim();\n\t          tokens.push({\n\t            type: this.types.binding,\n\t            value: value\n\t          });\n\t          lastIndex = index + delimiters[1].length;\n\t        }\n\t      }\n\t      return tokens;\n\t    };\n\t\n\t    return TextTemplateParser;\n\t  })();\n\t\n\t  Rivets.View = (function () {\n\t    function View(els, models, options) {\n\t      var k, option, v, _base, _i, _j, _len, _len1, _ref1, _ref2, _ref3, _ref4, _ref5;\n\t      this.els = els;\n\t      this.models = models;\n\t      if (options == null) {\n\t        options = {};\n\t      }\n\t      this.update = __bind(this.update, this);\n\t      this.publish = __bind(this.publish, this);\n\t      this.sync = __bind(this.sync, this);\n\t      this.unbind = __bind(this.unbind, this);\n\t      this.bind = __bind(this.bind, this);\n\t      this.select = __bind(this.select, this);\n\t      this.traverse = __bind(this.traverse, this);\n\t      this.build = __bind(this.build, this);\n\t      this.buildBinding = __bind(this.buildBinding, this);\n\t      this.bindingRegExp = __bind(this.bindingRegExp, this);\n\t      this.options = __bind(this.options, this);\n\t      if (!(this.els.jquery || this.els instanceof Array)) {\n\t        this.els = [this.els];\n\t      }\n\t      _ref1 = Rivets.extensions;\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        option = _ref1[_i];\n\t        this[option] = {};\n\t        if (options[option]) {\n\t          _ref2 = options[option];\n\t          for (k in _ref2) {\n\t            v = _ref2[k];\n\t            this[option][k] = v;\n\t          }\n\t        }\n\t        _ref3 = Rivets[\"public\"][option];\n\t        for (k in _ref3) {\n\t          v = _ref3[k];\n\t          if ((_base = this[option])[k] == null) {\n\t            _base[k] = v;\n\t          }\n\t        }\n\t      }\n\t      _ref4 = Rivets.options;\n\t      for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {\n\t        option = _ref4[_j];\n\t        this[option] = (_ref5 = options[option]) != null ? _ref5 : Rivets[\"public\"][option];\n\t      }\n\t      this.build();\n\t    }\n\t\n\t    View.prototype.options = function () {\n\t      var option, options, _i, _len, _ref1;\n\t      options = {};\n\t      _ref1 = Rivets.extensions.concat(Rivets.options);\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        option = _ref1[_i];\n\t        options[option] = this[option];\n\t      }\n\t      return options;\n\t    };\n\t\n\t    View.prototype.bindingRegExp = function () {\n\t      return new RegExp(\"^\" + this.prefix + \"-\");\n\t    };\n\t\n\t    View.prototype.buildBinding = function (binding, node, type, declaration) {\n\t      var context, ctx, dependencies, keypath, options, pipe, pipes;\n\t      options = {};\n\t      pipes = (function () {\n\t        var _i, _len, _ref1, _results;\n\t        _ref1 = declaration.split('|');\n\t        _results = [];\n\t        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t          pipe = _ref1[_i];\n\t          _results.push(pipe.trim());\n\t        }\n\t        return _results;\n\t      })();\n\t      context = (function () {\n\t        var _i, _len, _ref1, _results;\n\t        _ref1 = pipes.shift().split('<');\n\t        _results = [];\n\t        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t          ctx = _ref1[_i];\n\t          _results.push(ctx.trim());\n\t        }\n\t        return _results;\n\t      })();\n\t      keypath = context.shift();\n\t      options.formatters = pipes;\n\t      if (dependencies = context.shift()) {\n\t        options.dependencies = dependencies.split(/\\s+/);\n\t      }\n\t      return this.bindings.push(new Rivets[binding](this, node, type, keypath, options));\n\t    };\n\t\n\t    View.prototype.build = function () {\n\t      var el, parse, _i, _len, _ref1;\n\t      this.bindings = [];\n\t      parse = (function (_this) {\n\t        return function (node) {\n\t          var block, childNode, delimiters, n, parser, text, token, tokens, _i, _j, _len, _len1, _ref1, _results;\n\t          if (node.nodeType === 3) {\n\t            parser = Rivets.TextTemplateParser;\n\t            if (delimiters = _this.templateDelimiters) {\n\t              if ((tokens = parser.parse(node.data, delimiters)).length) {\n\t                if (!(tokens.length === 1 && tokens[0].type === parser.types.text)) {\n\t                  for (_i = 0, _len = tokens.length; _i < _len; _i++) {\n\t                    token = tokens[_i];\n\t                    text = document.createTextNode(token.value);\n\t                    node.parentNode.insertBefore(text, node);\n\t                    if (token.type === 1) {\n\t                      _this.buildBinding('TextBinding', text, null, token.value);\n\t                    }\n\t                  }\n\t                  node.parentNode.removeChild(node);\n\t                }\n\t              }\n\t            }\n\t          } else if (node.nodeType === 1) {\n\t            block = _this.traverse(node);\n\t          }\n\t          if (!block) {\n\t            _ref1 = (function () {\n\t              var _k, _len1, _ref1, _results1;\n\t              _ref1 = node.childNodes;\n\t              _results1 = [];\n\t              for (_k = 0, _len1 = _ref1.length; _k < _len1; _k++) {\n\t                n = _ref1[_k];\n\t                _results1.push(n);\n\t              }\n\t              return _results1;\n\t            })();\n\t            _results = [];\n\t            for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n\t              childNode = _ref1[_j];\n\t              _results.push(parse(childNode));\n\t            }\n\t            return _results;\n\t          }\n\t        };\n\t      })(this);\n\t      _ref1 = this.els;\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        el = _ref1[_i];\n\t        parse(el);\n\t      }\n\t      this.bindings.sort(function (a, b) {\n\t        var _ref2, _ref3;\n\t        return (((_ref2 = b.binder) != null ? _ref2.priority : void 0) || 0) - (((_ref3 = a.binder) != null ? _ref3.priority : void 0) || 0);\n\t      });\n\t    };\n\t\n\t    View.prototype.traverse = function (node) {\n\t      var attribute, attributes, binder, bindingRegExp, block, identifier, regexp, type, value, _i, _j, _len, _len1, _ref1, _ref2, _ref3;\n\t      bindingRegExp = this.bindingRegExp();\n\t      block = node.nodeName === 'SCRIPT' || node.nodeName === 'STYLE';\n\t      _ref1 = node.attributes;\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        attribute = _ref1[_i];\n\t        if (bindingRegExp.test(attribute.name)) {\n\t          type = attribute.name.replace(bindingRegExp, '');\n\t          if (!(binder = this.binders[type])) {\n\t            _ref2 = this.binders;\n\t            for (identifier in _ref2) {\n\t              value = _ref2[identifier];\n\t              if (identifier !== '*' && identifier.indexOf('*') !== -1) {\n\t                regexp = new RegExp(\"^\" + identifier.replace(/\\*/g, '.+') + \"$\");\n\t                if (regexp.test(type)) {\n\t                  binder = value;\n\t                }\n\t              }\n\t            }\n\t          }\n\t          binder || (binder = this.binders['*']);\n\t          if (binder.block) {\n\t            block = true;\n\t            attributes = [attribute];\n\t          }\n\t        }\n\t      }\n\t      _ref3 = attributes || node.attributes;\n\t      for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n\t        attribute = _ref3[_j];\n\t        if (bindingRegExp.test(attribute.name)) {\n\t          type = attribute.name.replace(bindingRegExp, '');\n\t          this.buildBinding('Binding', node, type, attribute.value);\n\t        }\n\t      }\n\t      if (!block) {\n\t        type = node.nodeName.toLowerCase();\n\t        if (this.components[type] && !node._bound) {\n\t          this.bindings.push(new Rivets.ComponentBinding(this, node, type));\n\t          block = true;\n\t        }\n\t      }\n\t      return block;\n\t    };\n\t\n\t    View.prototype.select = function (fn) {\n\t      var binding, _i, _len, _ref1, _results;\n\t      _ref1 = this.bindings;\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        binding = _ref1[_i];\n\t        if (fn(binding)) {\n\t          _results.push(binding);\n\t        }\n\t      }\n\t      return _results;\n\t    };\n\t\n\t    View.prototype.bind = function () {\n\t      var binding, _i, _len, _ref1, _results;\n\t      _ref1 = this.bindings;\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        binding = _ref1[_i];\n\t        _results.push(binding.bind());\n\t      }\n\t      return _results;\n\t    };\n\t\n\t    View.prototype.unbind = function () {\n\t      var binding, _i, _len, _ref1, _results;\n\t      _ref1 = this.bindings;\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        binding = _ref1[_i];\n\t        _results.push(binding.unbind());\n\t      }\n\t      return _results;\n\t    };\n\t\n\t    View.prototype.sync = function () {\n\t      var binding, _i, _len, _ref1, _results;\n\t      _ref1 = this.bindings;\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        binding = _ref1[_i];\n\t        _results.push(typeof binding.sync === \"function\" ? binding.sync() : void 0);\n\t      }\n\t      return _results;\n\t    };\n\t\n\t    View.prototype.publish = function () {\n\t      var binding, _i, _len, _ref1, _results;\n\t      _ref1 = this.select(function (b) {\n\t        var _ref1;\n\t        return (_ref1 = b.binder) != null ? _ref1.publishes : void 0;\n\t      });\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        binding = _ref1[_i];\n\t        _results.push(binding.publish());\n\t      }\n\t      return _results;\n\t    };\n\t\n\t    View.prototype.update = function (models) {\n\t      var binding, key, model, _i, _len, _ref1, _results;\n\t      if (models == null) {\n\t        models = {};\n\t      }\n\t      for (key in models) {\n\t        model = models[key];\n\t        this.models[key] = model;\n\t      }\n\t      _ref1 = this.bindings;\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        binding = _ref1[_i];\n\t        _results.push(typeof binding.update === \"function\" ? binding.update(models) : void 0);\n\t      }\n\t      return _results;\n\t    };\n\t\n\t    return View;\n\t  })();\n\t\n\t  Rivets.Binding = (function () {\n\t    function Binding(view, el, type, keypath, options) {\n\t      this.view = view;\n\t      this.el = el;\n\t      this.type = type;\n\t      this.keypath = keypath;\n\t      this.options = options != null ? options : {};\n\t      this.getValue = __bind(this.getValue, this);\n\t      this.update = __bind(this.update, this);\n\t      this.unbind = __bind(this.unbind, this);\n\t      this.bind = __bind(this.bind, this);\n\t      this.publish = __bind(this.publish, this);\n\t      this.sync = __bind(this.sync, this);\n\t      this.set = __bind(this.set, this);\n\t      this.eventHandler = __bind(this.eventHandler, this);\n\t      this.formattedValue = __bind(this.formattedValue, this);\n\t      this.parseTarget = __bind(this.parseTarget, this);\n\t      this.observe = __bind(this.observe, this);\n\t      this.setBinder = __bind(this.setBinder, this);\n\t      this.formatters = this.options.formatters || [];\n\t      this.dependencies = [];\n\t      this.formatterObservers = {};\n\t      this.model = void 0;\n\t      this.setBinder();\n\t    }\n\t\n\t    Binding.prototype.setBinder = function () {\n\t      var identifier, regexp, value, _ref1;\n\t      if (!(this.binder = this.view.binders[this.type])) {\n\t        _ref1 = this.view.binders;\n\t        for (identifier in _ref1) {\n\t          value = _ref1[identifier];\n\t          if (identifier !== '*' && identifier.indexOf('*') !== -1) {\n\t            regexp = new RegExp(\"^\" + identifier.replace(/\\*/g, '.+') + \"$\");\n\t            if (regexp.test(this.type)) {\n\t              this.binder = value;\n\t              this.args = new RegExp(\"^\" + identifier.replace(/\\*/g, '(.+)') + \"$\").exec(this.type);\n\t              this.args.shift();\n\t            }\n\t          }\n\t        }\n\t      }\n\t      this.binder || (this.binder = this.view.binders['*']);\n\t      if (this.binder instanceof Function) {\n\t        return this.binder = {\n\t          routine: this.binder\n\t        };\n\t      }\n\t    };\n\t\n\t    Binding.prototype.observe = function (obj, keypath, callback) {\n\t      return Rivets.sightglass(obj, keypath, callback, {\n\t        root: this.view.rootInterface,\n\t        adapters: this.view.adapters\n\t      });\n\t    };\n\t\n\t    Binding.prototype.parseTarget = function () {\n\t      var token;\n\t      token = Rivets.TypeParser.parse(this.keypath);\n\t      if (token.type === 0) {\n\t        return this.value = token.value;\n\t      } else {\n\t        this.observer = this.observe(this.view.models, this.keypath, this.sync);\n\t        return this.model = this.observer.target;\n\t      }\n\t    };\n\t\n\t    Binding.prototype.formattedValue = function (value) {\n\t      var ai, arg, args, fi, formatter, id, observer, processedArgs, _base, _i, _j, _len, _len1, _ref1;\n\t      _ref1 = this.formatters;\n\t      for (fi = _i = 0, _len = _ref1.length; _i < _len; fi = ++_i) {\n\t        formatter = _ref1[fi];\n\t        args = formatter.match(/[^\\s']+|'([^']|'[^\\s])*'|\"([^\"]|\"[^\\s])*\"/g);\n\t        id = args.shift();\n\t        formatter = this.view.formatters[id];\n\t        args = (function () {\n\t          var _j, _len1, _results;\n\t          _results = [];\n\t          for (_j = 0, _len1 = args.length; _j < _len1; _j++) {\n\t            arg = args[_j];\n\t            _results.push(Rivets.TypeParser.parse(arg));\n\t          }\n\t          return _results;\n\t        })();\n\t        processedArgs = [];\n\t        for (ai = _j = 0, _len1 = args.length; _j < _len1; ai = ++_j) {\n\t          arg = args[ai];\n\t          processedArgs.push(arg.type === 0 ? arg.value : ((_base = this.formatterObservers)[fi] || (_base[fi] = {}), !(observer = this.formatterObservers[fi][ai]) ? (observer = this.observe(this.view.models, arg.value, this.sync), this.formatterObservers[fi][ai] = observer) : void 0, observer.value()));\n\t        }\n\t        if ((formatter != null ? formatter.read : void 0) instanceof Function) {\n\t          value = formatter.read.apply(formatter, [value].concat(__slice.call(processedArgs)));\n\t        } else if (formatter instanceof Function) {\n\t          value = formatter.apply(null, [value].concat(__slice.call(processedArgs)));\n\t        }\n\t      }\n\t      return value;\n\t    };\n\t\n\t    Binding.prototype.eventHandler = function (fn) {\n\t      var binding, handler;\n\t      handler = (binding = this).view.handler;\n\t      return function (ev) {\n\t        return handler.call(fn, this, ev, binding);\n\t      };\n\t    };\n\t\n\t    Binding.prototype.set = function (value) {\n\t      var _ref1;\n\t      value = value instanceof Function && !this.binder[\"function\"] ? this.formattedValue(value.call(this.model)) : this.formattedValue(value);\n\t      return (_ref1 = this.binder.routine) != null ? _ref1.call(this, this.el, value) : void 0;\n\t    };\n\t\n\t    Binding.prototype.sync = function () {\n\t      var dependency, observer;\n\t      return this.set((function () {\n\t        var _i, _j, _len, _len1, _ref1, _ref2, _ref3;\n\t        if (this.observer) {\n\t          if (this.model !== this.observer.target) {\n\t            _ref1 = this.dependencies;\n\t            for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t              observer = _ref1[_i];\n\t              observer.unobserve();\n\t            }\n\t            this.dependencies = [];\n\t            if ((this.model = this.observer.target) != null && ((_ref2 = this.options.dependencies) != null ? _ref2.length : void 0)) {\n\t              _ref3 = this.options.dependencies;\n\t              for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n\t                dependency = _ref3[_j];\n\t                observer = this.observe(this.model, dependency, this.sync);\n\t                this.dependencies.push(observer);\n\t              }\n\t            }\n\t          }\n\t          return this.observer.value();\n\t        } else {\n\t          return this.value;\n\t        }\n\t      }).call(this));\n\t    };\n\t\n\t    Binding.prototype.publish = function () {\n\t      var args, formatter, id, value, _i, _len, _ref1, _ref2, _ref3;\n\t      if (this.observer) {\n\t        value = this.getValue(this.el);\n\t        _ref1 = this.formatters.slice(0).reverse();\n\t        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t          formatter = _ref1[_i];\n\t          args = formatter.split(/\\s+/);\n\t          id = args.shift();\n\t          if ((_ref2 = this.view.formatters[id]) != null ? _ref2.publish : void 0) {\n\t            value = (_ref3 = this.view.formatters[id]).publish.apply(_ref3, [value].concat(__slice.call(args)));\n\t          }\n\t        }\n\t        return this.observer.setValue(value);\n\t      }\n\t    };\n\t\n\t    Binding.prototype.bind = function () {\n\t      var dependency, observer, _i, _len, _ref1, _ref2, _ref3;\n\t      this.parseTarget();\n\t      if ((_ref1 = this.binder.bind) != null) {\n\t        _ref1.call(this, this.el);\n\t      }\n\t      if (this.model != null && ((_ref2 = this.options.dependencies) != null ? _ref2.length : void 0)) {\n\t        _ref3 = this.options.dependencies;\n\t        for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n\t          dependency = _ref3[_i];\n\t          observer = this.observe(this.model, dependency, this.sync);\n\t          this.dependencies.push(observer);\n\t        }\n\t      }\n\t      if (this.view.preloadData) {\n\t        return this.sync();\n\t      }\n\t    };\n\t\n\t    Binding.prototype.unbind = function () {\n\t      var ai, args, fi, observer, _i, _len, _ref1, _ref2, _ref3, _ref4;\n\t      if ((_ref1 = this.binder.unbind) != null) {\n\t        _ref1.call(this, this.el);\n\t      }\n\t      if ((_ref2 = this.observer) != null) {\n\t        _ref2.unobserve();\n\t      }\n\t      _ref3 = this.dependencies;\n\t      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n\t        observer = _ref3[_i];\n\t        observer.unobserve();\n\t      }\n\t      this.dependencies = [];\n\t      _ref4 = this.formatterObservers;\n\t      for (fi in _ref4) {\n\t        args = _ref4[fi];\n\t        for (ai in args) {\n\t          observer = args[ai];\n\t          observer.unobserve();\n\t        }\n\t      }\n\t      return this.formatterObservers = {};\n\t    };\n\t\n\t    Binding.prototype.update = function (models) {\n\t      var _ref1, _ref2;\n\t      if (models == null) {\n\t        models = {};\n\t      }\n\t      this.model = (_ref1 = this.observer) != null ? _ref1.target : void 0;\n\t      return (_ref2 = this.binder.update) != null ? _ref2.call(this, models) : void 0;\n\t    };\n\t\n\t    Binding.prototype.getValue = function (el) {\n\t      if (this.binder && this.binder.getValue != null) {\n\t        return this.binder.getValue.call(this, el);\n\t      } else {\n\t        return Rivets.Util.getInputValue(el);\n\t      }\n\t    };\n\t\n\t    return Binding;\n\t  })();\n\t\n\t  Rivets.ComponentBinding = (function (_super) {\n\t    __extends(ComponentBinding, _super);\n\t\n\t    function ComponentBinding(view, el, type) {\n\t      var attribute, bindingRegExp, propertyName, _i, _len, _ref1, _ref2;\n\t      this.view = view;\n\t      this.el = el;\n\t      this.type = type;\n\t      this.unbind = __bind(this.unbind, this);\n\t      this.bind = __bind(this.bind, this);\n\t      this.locals = __bind(this.locals, this);\n\t      this.component = this.view.components[this.type];\n\t      this[\"static\"] = {};\n\t      this.observers = {};\n\t      this.upstreamObservers = {};\n\t      bindingRegExp = view.bindingRegExp();\n\t      _ref1 = this.el.attributes || [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        attribute = _ref1[_i];\n\t        if (!bindingRegExp.test(attribute.name)) {\n\t          propertyName = this.camelCase(attribute.name);\n\t          if (__indexOf.call((_ref2 = this.component[\"static\"]) != null ? _ref2 : [], propertyName) >= 0) {\n\t            this[\"static\"][propertyName] = attribute.value;\n\t          } else {\n\t            this.observers[propertyName] = attribute.value;\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    ComponentBinding.prototype.sync = function () {};\n\t\n\t    ComponentBinding.prototype.update = function () {};\n\t\n\t    ComponentBinding.prototype.publish = function () {};\n\t\n\t    ComponentBinding.prototype.locals = function () {\n\t      var key, observer, result, value, _ref1, _ref2;\n\t      result = {};\n\t      _ref1 = this[\"static\"];\n\t      for (key in _ref1) {\n\t        value = _ref1[key];\n\t        result[key] = value;\n\t      }\n\t      _ref2 = this.observers;\n\t      for (key in _ref2) {\n\t        observer = _ref2[key];\n\t        result[key] = observer.value();\n\t      }\n\t      return result;\n\t    };\n\t\n\t    ComponentBinding.prototype.camelCase = function (string) {\n\t      return string.replace(/-([a-z])/g, function (grouped) {\n\t        return grouped[1].toUpperCase();\n\t      });\n\t    };\n\t\n\t    ComponentBinding.prototype.bind = function () {\n\t      var k, key, keypath, observer, option, options, scope, v, _base, _i, _j, _len, _len1, _ref1, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _results;\n\t      if (!this.bound) {\n\t        _ref1 = this.observers;\n\t        for (key in _ref1) {\n\t          keypath = _ref1[key];\n\t          this.observers[key] = this.observe(this.view.models, keypath, (function (_this) {\n\t            return function (key) {\n\t              return function () {\n\t                return _this.componentView.models[key] = _this.observers[key].value();\n\t              };\n\t            };\n\t          })(this).call(this, key));\n\t        }\n\t        this.bound = true;\n\t      }\n\t      if (this.componentView != null) {\n\t        return this.componentView.bind();\n\t      } else {\n\t        this.el.innerHTML = this.component.template.call(this);\n\t        scope = this.component.initialize.call(this, this.el, this.locals());\n\t        this.el._bound = true;\n\t        options = {};\n\t        _ref2 = Rivets.extensions;\n\t        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {\n\t          option = _ref2[_i];\n\t          options[option] = {};\n\t          if (this.component[option]) {\n\t            _ref3 = this.component[option];\n\t            for (k in _ref3) {\n\t              v = _ref3[k];\n\t              options[option][k] = v;\n\t            }\n\t          }\n\t          _ref4 = this.view[option];\n\t          for (k in _ref4) {\n\t            v = _ref4[k];\n\t            if ((_base = options[option])[k] == null) {\n\t              _base[k] = v;\n\t            }\n\t          }\n\t        }\n\t        _ref5 = Rivets.options;\n\t        for (_j = 0, _len1 = _ref5.length; _j < _len1; _j++) {\n\t          option = _ref5[_j];\n\t          options[option] = (_ref6 = this.component[option]) != null ? _ref6 : this.view[option];\n\t        }\n\t        this.componentView = new Rivets.View(this.el, scope, options);\n\t        this.componentView.bind();\n\t        _ref7 = this.observers;\n\t        _results = [];\n\t        for (key in _ref7) {\n\t          observer = _ref7[key];\n\t          _results.push(this.upstreamObservers[key] = this.observe(this.componentView.models, key, (function (_this) {\n\t            return function (key, observer) {\n\t              return function () {\n\t                return observer.setValue(_this.componentView.models[key]);\n\t              };\n\t            };\n\t          })(this).call(this, key, observer)));\n\t        }\n\t        return _results;\n\t      }\n\t    };\n\t\n\t    ComponentBinding.prototype.unbind = function () {\n\t      var key, observer, _ref1, _ref2, _ref3;\n\t      _ref1 = this.upstreamObservers;\n\t      for (key in _ref1) {\n\t        observer = _ref1[key];\n\t        observer.unobserve();\n\t      }\n\t      _ref2 = this.observers;\n\t      for (key in _ref2) {\n\t        observer = _ref2[key];\n\t        observer.unobserve();\n\t      }\n\t      return (_ref3 = this.componentView) != null ? _ref3.unbind.call(this) : void 0;\n\t    };\n\t\n\t    return ComponentBinding;\n\t  })(Rivets.Binding);\n\t\n\t  Rivets.TextBinding = (function (_super) {\n\t    __extends(TextBinding, _super);\n\t\n\t    function TextBinding(view, el, type, keypath, options) {\n\t      this.view = view;\n\t      this.el = el;\n\t      this.type = type;\n\t      this.keypath = keypath;\n\t      this.options = options != null ? options : {};\n\t      this.sync = __bind(this.sync, this);\n\t      this.formatters = this.options.formatters || [];\n\t      this.dependencies = [];\n\t      this.formatterObservers = {};\n\t    }\n\t\n\t    TextBinding.prototype.binder = {\n\t      routine: function routine(node, value) {\n\t        return node.data = value != null ? value : '';\n\t      }\n\t    };\n\t\n\t    TextBinding.prototype.sync = function () {\n\t      return TextBinding.__super__.sync.apply(this, arguments);\n\t    };\n\t\n\t    return TextBinding;\n\t  })(Rivets.Binding);\n\t\n\t  Rivets[\"public\"].binders.text = function (el, value) {\n\t    if (el.textContent != null) {\n\t      return el.textContent = value != null ? value : '';\n\t    } else {\n\t      return el.innerText = value != null ? value : '';\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders.html = function (el, value) {\n\t    return el.innerHTML = value != null ? value : '';\n\t  };\n\t\n\t  Rivets[\"public\"].binders.show = function (el, value) {\n\t    return el.style.display = value ? '' : 'none';\n\t  };\n\t\n\t  Rivets[\"public\"].binders.hide = function (el, value) {\n\t    return el.style.display = value ? 'none' : '';\n\t  };\n\t\n\t  Rivets[\"public\"].binders.enabled = function (el, value) {\n\t    return el.disabled = !value;\n\t  };\n\t\n\t  Rivets[\"public\"].binders.disabled = function (el, value) {\n\t    return el.disabled = !!value;\n\t  };\n\t\n\t  Rivets[\"public\"].binders.checked = {\n\t    publishes: true,\n\t    priority: 2000,\n\t    bind: function bind(el) {\n\t      return Rivets.Util.bindEvent(el, 'change', this.publish);\n\t    },\n\t    unbind: function unbind(el) {\n\t      return Rivets.Util.unbindEvent(el, 'change', this.publish);\n\t    },\n\t    routine: function routine(el, value) {\n\t      var _ref1;\n\t      if (el.type === 'radio') {\n\t        return el.checked = ((_ref1 = el.value) != null ? _ref1.toString() : void 0) === (value != null ? value.toString() : void 0);\n\t      } else {\n\t        return el.checked = !!value;\n\t      }\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders.unchecked = {\n\t    publishes: true,\n\t    priority: 2000,\n\t    bind: function bind(el) {\n\t      return Rivets.Util.bindEvent(el, 'change', this.publish);\n\t    },\n\t    unbind: function unbind(el) {\n\t      return Rivets.Util.unbindEvent(el, 'change', this.publish);\n\t    },\n\t    routine: function routine(el, value) {\n\t      var _ref1;\n\t      if (el.type === 'radio') {\n\t        return el.checked = ((_ref1 = el.value) != null ? _ref1.toString() : void 0) !== (value != null ? value.toString() : void 0);\n\t      } else {\n\t        return el.checked = !value;\n\t      }\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders.value = {\n\t    publishes: true,\n\t    priority: 3000,\n\t    bind: function bind(el) {\n\t      if (!(el.tagName === 'INPUT' && el.type === 'radio')) {\n\t        this.event = el.tagName === 'SELECT' ? 'change' : 'input';\n\t        return Rivets.Util.bindEvent(el, this.event, this.publish);\n\t      }\n\t    },\n\t    unbind: function unbind(el) {\n\t      if (!(el.tagName === 'INPUT' && el.type === 'radio')) {\n\t        return Rivets.Util.unbindEvent(el, this.event, this.publish);\n\t      }\n\t    },\n\t    routine: function routine(el, value) {\n\t      var o, _i, _len, _ref1, _ref2, _ref3, _results;\n\t      if (el.tagName === 'INPUT' && el.type === 'radio') {\n\t        return el.setAttribute('value', value);\n\t      } else if (window.jQuery != null) {\n\t        el = jQuery(el);\n\t        if ((value != null ? value.toString() : void 0) !== ((_ref1 = el.val()) != null ? _ref1.toString() : void 0)) {\n\t          return el.val(value != null ? value : '');\n\t        }\n\t      } else {\n\t        if (el.type === 'select-multiple') {\n\t          if (value != null) {\n\t            _results = [];\n\t            for (_i = 0, _len = el.length; _i < _len; _i++) {\n\t              o = el[_i];\n\t              _results.push(o.selected = (_ref2 = o.value, __indexOf.call(value, _ref2) >= 0));\n\t            }\n\t            return _results;\n\t          }\n\t        } else if ((value != null ? value.toString() : void 0) !== ((_ref3 = el.value) != null ? _ref3.toString() : void 0)) {\n\t          return el.value = value != null ? value : '';\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders[\"if\"] = {\n\t    block: true,\n\t    priority: 4000,\n\t    bind: function bind(el) {\n\t      var attr, declaration;\n\t      if (this.marker == null) {\n\t        attr = [this.view.prefix, this.type].join('-').replace('--', '-');\n\t        declaration = el.getAttribute(attr);\n\t        this.marker = document.createComment(\" rivets: \" + this.type + \" \" + declaration + \" \");\n\t        this.bound = false;\n\t        el.removeAttribute(attr);\n\t        el.parentNode.insertBefore(this.marker, el);\n\t        return el.parentNode.removeChild(el);\n\t      }\n\t    },\n\t    unbind: function unbind() {\n\t      var _ref1;\n\t      return (_ref1 = this.nested) != null ? _ref1.unbind() : void 0;\n\t    },\n\t    routine: function routine(el, value) {\n\t      var key, model, models, _ref1;\n\t      if (!!value === !this.bound) {\n\t        if (value) {\n\t          models = {};\n\t          _ref1 = this.view.models;\n\t          for (key in _ref1) {\n\t            model = _ref1[key];\n\t            models[key] = model;\n\t          }\n\t          (this.nested || (this.nested = new Rivets.View(el, models, this.view.options()))).bind();\n\t          this.marker.parentNode.insertBefore(el, this.marker.nextSibling);\n\t          return this.bound = true;\n\t        } else {\n\t          el.parentNode.removeChild(el);\n\t          this.nested.unbind();\n\t          return this.bound = false;\n\t        }\n\t      }\n\t    },\n\t    update: function update(models) {\n\t      var _ref1;\n\t      return (_ref1 = this.nested) != null ? _ref1.update(models) : void 0;\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders.unless = {\n\t    block: true,\n\t    priority: 4000,\n\t    bind: function bind(el) {\n\t      return Rivets[\"public\"].binders[\"if\"].bind.call(this, el);\n\t    },\n\t    unbind: function unbind() {\n\t      return Rivets[\"public\"].binders[\"if\"].unbind.call(this);\n\t    },\n\t    routine: function routine(el, value) {\n\t      return Rivets[\"public\"].binders[\"if\"].routine.call(this, el, !value);\n\t    },\n\t    update: function update(models) {\n\t      return Rivets[\"public\"].binders[\"if\"].update.call(this, models);\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders['on-*'] = {\n\t    \"function\": true,\n\t    priority: 1000,\n\t    unbind: function unbind(el) {\n\t      if (this.handler) {\n\t        return Rivets.Util.unbindEvent(el, this.args[0], this.handler);\n\t      }\n\t    },\n\t    routine: function routine(el, value) {\n\t      if (this.handler) {\n\t        Rivets.Util.unbindEvent(el, this.args[0], this.handler);\n\t      }\n\t      return Rivets.Util.bindEvent(el, this.args[0], this.handler = this.eventHandler(value));\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders['each-*'] = {\n\t    block: true,\n\t    priority: 4000,\n\t    bind: function bind(el) {\n\t      var attr, view, _i, _len, _ref1;\n\t      if (this.marker == null) {\n\t        attr = [this.view.prefix, this.type].join('-').replace('--', '-');\n\t        this.marker = document.createComment(\" rivets: \" + this.type + \" \");\n\t        this.iterated = [];\n\t        el.removeAttribute(attr);\n\t        el.parentNode.insertBefore(this.marker, el);\n\t        el.parentNode.removeChild(el);\n\t      } else {\n\t        _ref1 = this.iterated;\n\t        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t          view = _ref1[_i];\n\t          view.bind();\n\t        }\n\t      }\n\t    },\n\t    unbind: function unbind(el) {\n\t      var view, _i, _len, _ref1, _results;\n\t      if (this.iterated != null) {\n\t        _ref1 = this.iterated;\n\t        _results = [];\n\t        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t          view = _ref1[_i];\n\t          _results.push(view.unbind());\n\t        }\n\t        return _results;\n\t      }\n\t    },\n\t    routine: function routine(el, collection) {\n\t      var binding, data, i, index, key, model, modelName, options, previous, template, view, _i, _j, _k, _len, _len1, _len2, _ref1, _ref2, _ref3, _results;\n\t      modelName = this.args[0];\n\t      collection = collection || [];\n\t      if (this.iterated.length > collection.length) {\n\t        _ref1 = Array(this.iterated.length - collection.length);\n\t        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t          i = _ref1[_i];\n\t          view = this.iterated.pop();\n\t          view.unbind();\n\t          this.marker.parentNode.removeChild(view.els[0]);\n\t        }\n\t      }\n\t      for (index = _j = 0, _len1 = collection.length; _j < _len1; index = ++_j) {\n\t        model = collection[index];\n\t        data = {\n\t          index: index\n\t        };\n\t        data[modelName] = model;\n\t        if (this.iterated[index] == null) {\n\t          _ref2 = this.view.models;\n\t          for (key in _ref2) {\n\t            model = _ref2[key];\n\t            if (data[key] == null) {\n\t              data[key] = model;\n\t            }\n\t          }\n\t          previous = this.iterated.length ? this.iterated[this.iterated.length - 1].els[0] : this.marker;\n\t          options = this.view.options();\n\t          options.preloadData = true;\n\t          template = el.cloneNode(true);\n\t          view = new Rivets.View(template, data, options);\n\t          view.bind();\n\t          this.iterated.push(view);\n\t          this.marker.parentNode.insertBefore(template, previous.nextSibling);\n\t        } else if (this.iterated[index].models[modelName] !== model) {\n\t          this.iterated[index].update(data);\n\t        }\n\t      }\n\t      if (el.nodeName === 'OPTION') {\n\t        _ref3 = this.view.bindings;\n\t        _results = [];\n\t        for (_k = 0, _len2 = _ref3.length; _k < _len2; _k++) {\n\t          binding = _ref3[_k];\n\t          if (binding.el === this.marker.parentNode && binding.type === 'value') {\n\t            _results.push(binding.sync());\n\t          } else {\n\t            _results.push(void 0);\n\t          }\n\t        }\n\t        return _results;\n\t      }\n\t    },\n\t    update: function update(models) {\n\t      var data, key, model, view, _i, _len, _ref1, _results;\n\t      data = {};\n\t      for (key in models) {\n\t        model = models[key];\n\t        if (key !== this.args[0]) {\n\t          data[key] = model;\n\t        }\n\t      }\n\t      _ref1 = this.iterated;\n\t      _results = [];\n\t      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t        view = _ref1[_i];\n\t        _results.push(view.update(data));\n\t      }\n\t      return _results;\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders['class-*'] = function (el, value) {\n\t    var elClass;\n\t    elClass = \" \" + el.className + \" \";\n\t    if (!value === (elClass.indexOf(\" \" + this.args[0] + \" \") !== -1)) {\n\t      return el.className = value ? \"\" + el.className + \" \" + this.args[0] : elClass.replace(\" \" + this.args[0] + \" \", ' ').trim();\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].binders['*'] = function (el, value) {\n\t    if (value != null) {\n\t      return el.setAttribute(this.type, value);\n\t    } else {\n\t      return el.removeAttribute(this.type);\n\t    }\n\t  };\n\t\n\t  Rivets[\"public\"].adapters['.'] = {\n\t    id: '_rv',\n\t    counter: 0,\n\t    weakmap: {},\n\t    weakReference: function weakReference(obj) {\n\t      var id, _base, _name;\n\t      if (!obj.hasOwnProperty(this.id)) {\n\t        id = this.counter++;\n\t        Object.defineProperty(obj, this.id, {\n\t          value: id\n\t        });\n\t      }\n\t      return (_base = this.weakmap)[_name = obj[this.id]] || (_base[_name] = {\n\t        callbacks: {}\n\t      });\n\t    },\n\t    cleanupWeakReference: function cleanupWeakReference(ref, id) {\n\t      if (!Object.keys(ref.callbacks).length) {\n\t        if (!(ref.pointers && Object.keys(ref.pointers).length)) {\n\t          return delete this.weakmap[id];\n\t        }\n\t      }\n\t    },\n\t    stubFunction: function stubFunction(obj, fn) {\n\t      var map, original, weakmap;\n\t      original = obj[fn];\n\t      map = this.weakReference(obj);\n\t      weakmap = this.weakmap;\n\t      return obj[fn] = function () {\n\t        var callback, k, r, response, _i, _len, _ref1, _ref2, _ref3, _ref4;\n\t        response = original.apply(obj, arguments);\n\t        _ref1 = map.pointers;\n\t        for (r in _ref1) {\n\t          k = _ref1[r];\n\t          _ref4 = (_ref2 = (_ref3 = weakmap[r]) != null ? _ref3.callbacks[k] : void 0) != null ? _ref2 : [];\n\t          for (_i = 0, _len = _ref4.length; _i < _len; _i++) {\n\t            callback = _ref4[_i];\n\t            callback();\n\t          }\n\t        }\n\t        return response;\n\t      };\n\t    },\n\t    observeMutations: function observeMutations(obj, ref, keypath) {\n\t      var fn, functions, map, _base, _i, _len;\n\t      if (Array.isArray(obj)) {\n\t        map = this.weakReference(obj);\n\t        if (map.pointers == null) {\n\t          map.pointers = {};\n\t          functions = ['push', 'pop', 'shift', 'unshift', 'sort', 'reverse', 'splice'];\n\t          for (_i = 0, _len = functions.length; _i < _len; _i++) {\n\t            fn = functions[_i];\n\t            this.stubFunction(obj, fn);\n\t          }\n\t        }\n\t        if ((_base = map.pointers)[ref] == null) {\n\t          _base[ref] = [];\n\t        }\n\t        if (__indexOf.call(map.pointers[ref], keypath) < 0) {\n\t          return map.pointers[ref].push(keypath);\n\t        }\n\t      }\n\t    },\n\t    unobserveMutations: function unobserveMutations(obj, ref, keypath) {\n\t      var idx, map, pointers;\n\t      if (Array.isArray(obj) && obj[this.id] != null) {\n\t        if (map = this.weakmap[obj[this.id]]) {\n\t          if (pointers = map.pointers[ref]) {\n\t            if ((idx = pointers.indexOf(keypath)) >= 0) {\n\t              pointers.splice(idx, 1);\n\t            }\n\t            if (!pointers.length) {\n\t              delete map.pointers[ref];\n\t            }\n\t            return this.cleanupWeakReference(map, obj[this.id]);\n\t          }\n\t        }\n\t      }\n\t    },\n\t    observe: function observe(obj, keypath, callback) {\n\t      var callbacks, desc, value;\n\t      callbacks = this.weakReference(obj).callbacks;\n\t      if (callbacks[keypath] == null) {\n\t        callbacks[keypath] = [];\n\t        desc = Object.getOwnPropertyDescriptor(obj, keypath);\n\t        if (!((desc != null ? desc.get : void 0) || (desc != null ? desc.set : void 0))) {\n\t          value = obj[keypath];\n\t          Object.defineProperty(obj, keypath, {\n\t            enumerable: true,\n\t            get: function get() {\n\t              return value;\n\t            },\n\t            set: (function (_this) {\n\t              return function (newValue) {\n\t                var map, _i, _len, _ref1;\n\t                if (newValue !== value) {\n\t                  _this.unobserveMutations(value, obj[_this.id], keypath);\n\t                  value = newValue;\n\t                  if (map = _this.weakmap[obj[_this.id]]) {\n\t                    callbacks = map.callbacks;\n\t                    if (callbacks[keypath]) {\n\t                      _ref1 = callbacks[keypath].slice();\n\t                      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t                        callback = _ref1[_i];\n\t                        if (__indexOf.call(callbacks[keypath], callback) >= 0) {\n\t                          callback();\n\t                        }\n\t                      }\n\t                    }\n\t                    return _this.observeMutations(newValue, obj[_this.id], keypath);\n\t                  }\n\t                }\n\t              };\n\t            })(this)\n\t          });\n\t        }\n\t      }\n\t      if (__indexOf.call(callbacks[keypath], callback) < 0) {\n\t        callbacks[keypath].push(callback);\n\t      }\n\t      return this.observeMutations(obj[keypath], obj[this.id], keypath);\n\t    },\n\t    unobserve: function unobserve(obj, keypath, callback) {\n\t      var callbacks, idx, map;\n\t      if (map = this.weakmap[obj[this.id]]) {\n\t        if (callbacks = map.callbacks[keypath]) {\n\t          if ((idx = callbacks.indexOf(callback)) >= 0) {\n\t            callbacks.splice(idx, 1);\n\t            if (!callbacks.length) {\n\t              delete map.callbacks[keypath];\n\t            }\n\t          }\n\t          this.unobserveMutations(obj[keypath], obj[this.id], keypath);\n\t          return this.cleanupWeakReference(map, obj[this.id]);\n\t        }\n\t      }\n\t    },\n\t    get: function get(obj, keypath) {\n\t      return obj[keypath];\n\t    },\n\t    set: function set(obj, keypath, value) {\n\t      return obj[keypath] = value;\n\t    }\n\t  };\n\t\n\t  Rivets.factory = function (sightglass) {\n\t    Rivets.sightglass = sightglass;\n\t    Rivets[\"public\"]._ = Rivets;\n\t    return Rivets[\"public\"];\n\t  };\n\t\n\t  if (typeof (typeof module !== \"undefined\" && module !== null ? module.exports : void 0) === 'object') {\n\t    module.exports = Rivets.factory(__webpack_require__(8));\n\t  } else if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (sightglass) {\n\t      return this.rivets = Rivets.factory(sightglass);\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else {\n\t    this.rivets = Rivets.factory(sightglass);\n\t  }\n\t}).call(undefined);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(7)(module)))\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (module) {\n\t\tif (!module.webpackPolyfill) {\n\t\t\tmodule.deprecate = function () {};\n\t\t\tmodule.paths = [];\n\t\t\t// module.parent = undefined by default\n\t\t\tmodule.children = [];\n\t\t\tmodule.webpackPolyfill = 1;\n\t\t}\n\t\treturn module;\n\t};\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\t\n\t(function () {\n\t  // Public sightglass interface.\n\t  function sightglass(obj, keypath, callback, options) {\n\t    return new Observer(obj, keypath, callback, options);\n\t  }\n\t\n\t  // Batteries not included.\n\t  sightglass.adapters = {};\n\t\n\t  // Constructs a new keypath observer and kicks things off.\n\t  function Observer(obj, keypath, callback, options) {\n\t    this.options = options || {};\n\t    this.options.adapters = this.options.adapters || {};\n\t    this.obj = obj;\n\t    this.keypath = keypath;\n\t    this.callback = callback;\n\t    this.objectPath = [];\n\t    this.parse();\n\t\n\t    if (isObject(this.target = this.realize())) {\n\t      this.set(true, this.key, this.target, this.callback);\n\t    }\n\t  }\n\t\n\t  // Tokenizes the provided keypath string into interface + path tokens for the\n\t  // observer to work with.\n\t  Observer.tokenize = function (keypath, interfaces, root) {\n\t    var tokens = [];\n\t    var current = { i: root, path: '' };\n\t    var index, chr;\n\t\n\t    for (index = 0; index < keypath.length; index++) {\n\t      chr = keypath.charAt(index);\n\t\n\t      if (!! ~interfaces.indexOf(chr)) {\n\t        tokens.push(current);\n\t        current = { i: chr, path: '' };\n\t      } else {\n\t        current.path += chr;\n\t      }\n\t    }\n\t\n\t    tokens.push(current);\n\t    return tokens;\n\t  };\n\t\n\t  // Parses the keypath using the interfaces defined on the view. Sets variables\n\t  // for the tokenized keypath as well as the end key.\n\t  Observer.prototype.parse = function () {\n\t    var interfaces = this.interfaces();\n\t    var root, path;\n\t\n\t    if (!interfaces.length) {\n\t      error('Must define at least one adapter interface.');\n\t    }\n\t\n\t    if (!! ~interfaces.indexOf(this.keypath[0])) {\n\t      root = this.keypath[0];\n\t      path = this.keypath.substr(1);\n\t    } else {\n\t      if (typeof (root = this.options.root || sightglass.root) === 'undefined') {\n\t        error('Must define a default root adapter.');\n\t      }\n\t\n\t      path = this.keypath;\n\t    }\n\t\n\t    this.tokens = Observer.tokenize(path, interfaces, root);\n\t    this.key = this.tokens.pop();\n\t  };\n\t\n\t  // Realizes the full keypath, attaching observers for every key and correcting\n\t  // old observers to any changed objects in the keypath.\n\t  Observer.prototype.realize = function () {\n\t    var current = this.obj;\n\t    var unreached = false;\n\t    var prev;\n\t\n\t    this.tokens.forEach(function (token, index) {\n\t      if (isObject(current)) {\n\t        if (typeof this.objectPath[index] !== 'undefined') {\n\t          if (current !== (prev = this.objectPath[index])) {\n\t            this.set(false, token, prev, this.update.bind(this));\n\t            this.set(true, token, current, this.update.bind(this));\n\t            this.objectPath[index] = current;\n\t          }\n\t        } else {\n\t          this.set(true, token, current, this.update.bind(this));\n\t          this.objectPath[index] = current;\n\t        }\n\t\n\t        current = this.get(token, current);\n\t      } else {\n\t        if (unreached === false) {\n\t          unreached = index;\n\t        }\n\t\n\t        if (prev = this.objectPath[index]) {\n\t          this.set(false, token, prev, this.update.bind(this));\n\t        }\n\t      }\n\t    }, this);\n\t\n\t    if (unreached !== false) {\n\t      this.objectPath.splice(unreached);\n\t    }\n\t\n\t    return current;\n\t  };\n\t\n\t  // Updates the keypath. This is called when any intermediary key is changed.\n\t  Observer.prototype.update = function () {\n\t    var next, oldValue;\n\t\n\t    if ((next = this.realize()) !== this.target) {\n\t      if (isObject(this.target)) {\n\t        this.set(false, this.key, this.target, this.callback);\n\t      }\n\t\n\t      if (isObject(next)) {\n\t        this.set(true, this.key, next, this.callback);\n\t      }\n\t\n\t      oldValue = this.value();\n\t      this.target = next;\n\t\n\t      if (this.value() !== oldValue) this.callback();\n\t    }\n\t  };\n\t\n\t  // Reads the current end value of the observed keypath. Returns undefined if\n\t  // the full keypath is unreachable.\n\t  Observer.prototype.value = function () {\n\t    if (isObject(this.target)) {\n\t      return this.get(this.key, this.target);\n\t    }\n\t  };\n\t\n\t  // Sets the current end value of the observed keypath. Calling setValue when\n\t  // the full keypath is unreachable is a no-op.\n\t  Observer.prototype.setValue = function (value) {\n\t    if (isObject(this.target)) {\n\t      this.adapter(this.key).set(this.target, this.key.path, value);\n\t    }\n\t  };\n\t\n\t  // Gets the provided key on an object.\n\t  Observer.prototype.get = function (key, obj) {\n\t    return this.adapter(key).get(obj, key.path);\n\t  };\n\t\n\t  // Observes or unobserves a callback on the object using the provided key.\n\t  Observer.prototype.set = function (active, key, obj, callback) {\n\t    var action = active ? 'observe' : 'unobserve';\n\t    this.adapter(key)[action](obj, key.path, callback);\n\t  };\n\t\n\t  // Returns an array of all unique adapter interfaces available.\n\t  Observer.prototype.interfaces = function () {\n\t    var interfaces = Object.keys(this.options.adapters);\n\t\n\t    Object.keys(sightglass.adapters).forEach(function (i) {\n\t      if (! ~interfaces.indexOf(i)) {\n\t        interfaces.push(i);\n\t      }\n\t    });\n\t\n\t    return interfaces;\n\t  };\n\t\n\t  // Convenience function to grab the adapter for a specific key.\n\t  Observer.prototype.adapter = function (key) {\n\t    return this.options.adapters[key.i] || sightglass.adapters[key.i];\n\t  };\n\t\n\t  // Unobserves the entire keypath.\n\t  Observer.prototype.unobserve = function () {\n\t    var obj;\n\t\n\t    this.tokens.forEach(function (token, index) {\n\t      if (obj = this.objectPath[index]) {\n\t        this.set(false, token, obj, this.update.bind(this));\n\t      }\n\t    }, this);\n\t\n\t    if (isObject(this.target)) {\n\t      this.set(false, this.key, this.target, this.callback);\n\t    }\n\t  };\n\t\n\t  // Check if a value is an object than can be observed.\n\t  function isObject(obj) {\n\t    return typeof obj === 'object' && obj !== null;\n\t  }\n\t\n\t  // Error thrower.\n\t  function error(message) {\n\t    throw new Error('[sightglass] ' + message);\n\t  }\n\t\n\t  // Export module for Node and the browser.\n\t  if (typeof module !== 'undefined' && module.exports) {\n\t    module.exports = sightglass;\n\t  } else if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t      return this.sightglass = sightglass;\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else {\n\t    this.sightglass = sightglass;\n\t  }\n\t}).call(undefined);\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _prestashop = __webpack_require__(3);\n\t\n\tvar _prestashop2 = _interopRequireDefault(_prestashop);\n\t\n\tfunction setupRegularCheckout() {\n\t  function hideSubmitButton() {\n\t    (0, _jquery2['default'])('#conditions-to-approve button').hide();\n\t    (0, _jquery2['default'])('#delivery-method button').hide();\n\t  }\n\t\n\t  function refreshPaymentOptions() {\n\t    var params = (0, _jquery2['default'])('#conditions-to-approve').serialize() + '&action=getPaymentOptions';\n\t    _jquery2['default'].post('', params).then(function (resp) {\n\t      (0, _jquery2['default'])('#payment-options').replaceWith(resp);\n\t      hideSubmitButton();\n\t    });\n\t  }\n\t\n\t  function refreshDeliveryOptions() {\n\t    var params = (0, _jquery2['default'])('#delivery-method').serialize() + '&action=selectDeliveryOption';\n\t    _jquery2['default'].post('', params).then(function (resp) {\n\t      (0, _jquery2['default'])('#delivery-options').replaceWith(resp);\n\t      _prestashop2['default'].emit('cart updated');\n\t      hideSubmitButton();\n\t    });\n\t  }\n\t\n\t  hideSubmitButton();\n\t  (0, _jquery2['default'])('body').on('change', '#conditions-to-approve input[type=\"checkbox\"]', refreshPaymentOptions);\n\t  (0, _jquery2['default'])('body').on('change', '#delivery-method input[type=\"radio\"]', refreshDeliveryOptions);\n\t}\n\t\n\tfunction setupAdvancedCheckout() {\n\t  function getSelectedPaymentOption() {\n\t    return (0, _jquery2['default'])('#payment-options input[name=\"advanced-payment-option\"]:checked').attr('id');\n\t  }\n\t\n\t  function enableOrDisableOrderButton() {\n\t    var show = true;\n\t    (0, _jquery2['default'])('#conditions-to-approve input[type=\"checkbox\"]').each(function (_, checkbox) {\n\t      if (!checkbox.checked) {\n\t        show = false;\n\t      }\n\t    });\n\t\n\t    if (!getSelectedPaymentOption()) {\n\t      show = false;\n\t    }\n\t\n\t    (0, _jquery2['default'])('#payment-confirmation button').attr('disabled', !show);\n\t  }\n\t\n\t  function confirmPayment() {\n\t    var option = getSelectedPaymentOption();\n\t    if (option) {\n\t      (0, _jquery2['default'])('#pay-with-' + option + '-form').submit();\n\t    }\n\t  }\n\t\n\t  (0, _jquery2['default'])('#payment-confirmation button').on('click', function () {\n\t    confirmPayment();\n\t  });\n\t\n\t  (0, _jquery2['default'])('#payment-options input[type=\"checkbox\"][disabled]').attr('disabled', false);\n\t  (0, _jquery2['default'])('body').on('change', '#conditions-to-approve input[type=\"checkbox\"]', enableOrDisableOrderButton);\n\t  (0, _jquery2['default'])('body').on('change', 'input[name=\"advanced-payment-option\"]', enableOrDisableOrderButton);\n\t}\n\t\n\t(0, _jquery2['default'])(document).ready(function setupCheckoutScripts() {\n\t  if (!(0, _jquery2['default'])('body#order-opc')) {\n\t    return;\n\t  }\n\t\n\t  _prestashop2['default'].on('cart updated', function () {\n\t    _jquery2['default'].get('', {\n\t      action: 'getCartSummary'\n\t    }).then(function (resp) {\n\t      (0, _jquery2['default'])('#cart-summary').html(resp);\n\t    });\n\t  });\n\t\n\t  if ((0, _jquery2['default'])('#payment-options').data('uses-advanced-payment-api')) {\n\t    setupAdvancedCheckout();\n\t  } else {\n\t    setupRegularCheckout();\n\t  }\n\t});\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _jquery = __webpack_require__(2);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tfunction replaceProducts(html) {\n\t  (0, _jquery2['default'])('#products').replaceWith(html);\n\t  (0, _jquery2['default'])('.ps-hidden-by-js').hide();\n\t}\n\t\n\tfunction refreshProducts(extraParams) {\n\t  extraParams = extraParams || '';\n\t  var params = (0, _jquery2['default'])('#navigation').serialize() + extraParams;\n\t  var url = window.location.href.split(\"?\")[0];\n\t  _jquery2['default'].post(url, params, null, 'json').then(function (resp) {\n\t    replaceProducts(resp.products);\n\t    window.history.pushState({ products: resp.products }, undefined, resp.query_url);\n\t    window.onpopstate = function (e) {\n\t      if (e.state && e.state.products) {\n\t        replaceProducts(e.state.products);\n\t      }\n\t    };\n\t  });\n\t}\n\t\n\t(0, _jquery2['default'])(document).ready(function () {\n\t  (0, _jquery2['default'])('body').on('change', '#navigation input', function () {\n\t    refreshProducts();\n\t  });\n\t\n\t  (0, _jquery2['default'])('body').on('click', '#products button[name=\"page\"]', function (event) {\n\t    event.preventDefault();\n\t    var page = (0, _jquery2['default'])(event.target).attr('value');\n\t    refreshProducts('&page=' + page);\n\t  });\n\t\n\t  (0, _jquery2['default'])('body').on('click', '#products button[name=\"sort_option\"]', function (event) {\n\t    event.preventDefault();\n\t    var option = (0, _jquery2['default'])(event.target).attr('value');\n\t    refreshProducts('&sort_option=' + option);\n\t  });\n\t});\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** theme.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 84182f969099a8569d35\n **/","import $ from 'jquery';\n\nimport prestashop from 'prestashop';\nimport EventEmitter from 'events';\n\n// \"inherit\" EventEmitter\nfor (var i in EventEmitter.prototype) {\n    prestashop[i] = EventEmitter.prototype[i];\n}\n\nimport './setup-rivets';\nimport './checkout';\nimport './product-navigation';\n\n$(document).ready(() => {\n    $('.ps-shown-by-js').show();\n    $('.ps-hidden-by-js').hide();\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/theme.js\n **/","module.exports = $;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"$\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = prestashop;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"prestashop\"\n ** module id = 3\n ** module chunks = 0\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** (webpack)/~/node-libs-browser/~/events/events.js\n **/","import rivets from 'rivets';\nimport $ from 'jquery';\nimport prestashop from 'prestashop';\n\nrivets.configure({\n  prefix: 'ps',\n  templateDelimiters: ['[[', ']]'],\n});\n\nrivets.formatters.propertyList = function(obj) {\n  var key, _results;\n  _results = [];\n  for (key in obj) {\n    _results.push(\n      obj[key]\n    );\n  }\n  return _results;\n};\n\nrivets.formatters.customerAddress = function(obj) {\n  var address = prestashop.customer.addresses[obj];\n  if (address) {\n    return address.formatted;\n  } else {\n    return undefined;\n  }\n};\n\n$(document).ready(function(){\n  window.view = rivets.bind($('body'),{\n\n    prestashop:prestashop,\n\n  });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/setup-rivets.js\n **/","// Rivets.js\n// version: 0.8.1\n// author: Michael Richards\n// license: MIT\n(function() {\n  var Rivets, bindMethod, unbindMethod, _ref,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    __slice = [].slice,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  Rivets = {\n    options: ['prefix', 'templateDelimiters', 'rootInterface', 'preloadData', 'handler'],\n    extensions: ['binders', 'formatters', 'components', 'adapters'],\n    \"public\": {\n      binders: {},\n      components: {},\n      formatters: {},\n      adapters: {},\n      prefix: 'rv',\n      templateDelimiters: ['{', '}'],\n      rootInterface: '.',\n      preloadData: true,\n      handler: function(context, ev, binding) {\n        return this.call(context, ev, binding.view.models);\n      },\n      configure: function(options) {\n        var descriptor, key, option, value;\n        if (options == null) {\n          options = {};\n        }\n        for (option in options) {\n          value = options[option];\n          if (option === 'binders' || option === 'components' || option === 'formatters' || option === 'adapters') {\n            for (key in value) {\n              descriptor = value[key];\n              Rivets[option][key] = descriptor;\n            }\n          } else {\n            Rivets[\"public\"][option] = value;\n          }\n        }\n      },\n      bind: function(el, models, options) {\n        var view;\n        if (models == null) {\n          models = {};\n        }\n        if (options == null) {\n          options = {};\n        }\n        view = new Rivets.View(el, models, options);\n        view.bind();\n        return view;\n      },\n      init: function(component, el, data) {\n        var scope, view;\n        if (data == null) {\n          data = {};\n        }\n        if (el == null) {\n          el = document.createElement('div');\n        }\n        component = Rivets[\"public\"].components[component];\n        el.innerHTML = component.template.call(this, el);\n        scope = component.initialize.call(this, el, data);\n        view = new Rivets.View(el, scope);\n        view.bind();\n        return view;\n      }\n    }\n  };\n\n  if (window['jQuery'] || window['$']) {\n    _ref = 'on' in jQuery.prototype ? ['on', 'off'] : ['bind', 'unbind'], bindMethod = _ref[0], unbindMethod = _ref[1];\n    Rivets.Util = {\n      bindEvent: function(el, event, handler) {\n        return jQuery(el)[bindMethod](event, handler);\n      },\n      unbindEvent: function(el, event, handler) {\n        return jQuery(el)[unbindMethod](event, handler);\n      },\n      getInputValue: function(el) {\n        var $el;\n        $el = jQuery(el);\n        if ($el.attr('type') === 'checkbox') {\n          return $el.is(':checked');\n        } else {\n          return $el.val();\n        }\n      }\n    };\n  } else {\n    Rivets.Util = {\n      bindEvent: (function() {\n        if ('addEventListener' in window) {\n          return function(el, event, handler) {\n            return el.addEventListener(event, handler, false);\n          };\n        }\n        return function(el, event, handler) {\n          return el.attachEvent('on' + event, handler);\n        };\n      })(),\n      unbindEvent: (function() {\n        if ('removeEventListener' in window) {\n          return function(el, event, handler) {\n            return el.removeEventListener(event, handler, false);\n          };\n        }\n        return function(el, event, handler) {\n          return el.detachEvent('on' + event, handler);\n        };\n      })(),\n      getInputValue: function(el) {\n        var o, _i, _len, _results;\n        if (el.type === 'checkbox') {\n          return el.checked;\n        } else if (el.type === 'select-multiple') {\n          _results = [];\n          for (_i = 0, _len = el.length; _i < _len; _i++) {\n            o = el[_i];\n            if (o.selected) {\n              _results.push(o.value);\n            }\n          }\n          return _results;\n        } else {\n          return el.value;\n        }\n      }\n    };\n  }\n\n  Rivets.TypeParser = (function() {\n    function TypeParser() {}\n\n    TypeParser.types = {\n      primitive: 0,\n      keypath: 1\n    };\n\n    TypeParser.parse = function(string) {\n      if (/^'.*'$|^\".*\"$/.test(string)) {\n        return {\n          type: this.types.primitive,\n          value: string.slice(1, -1)\n        };\n      } else if (string === 'true') {\n        return {\n          type: this.types.primitive,\n          value: true\n        };\n      } else if (string === 'false') {\n        return {\n          type: this.types.primitive,\n          value: false\n        };\n      } else if (string === 'null') {\n        return {\n          type: this.types.primitive,\n          value: null\n        };\n      } else if (string === 'undefined') {\n        return {\n          type: this.types.primitive,\n          value: void 0\n        };\n      } else if (isNaN(Number(string)) === false) {\n        return {\n          type: this.types.primitive,\n          value: Number(string)\n        };\n      } else {\n        return {\n          type: this.types.keypath,\n          value: string\n        };\n      }\n    };\n\n    return TypeParser;\n\n  })();\n\n  Rivets.TextTemplateParser = (function() {\n    function TextTemplateParser() {}\n\n    TextTemplateParser.types = {\n      text: 0,\n      binding: 1\n    };\n\n    TextTemplateParser.parse = function(template, delimiters) {\n      var index, lastIndex, lastToken, length, substring, tokens, value;\n      tokens = [];\n      length = template.length;\n      index = 0;\n      lastIndex = 0;\n      while (lastIndex < length) {\n        index = template.indexOf(delimiters[0], lastIndex);\n        if (index < 0) {\n          tokens.push({\n            type: this.types.text,\n            value: template.slice(lastIndex)\n          });\n          break;\n        } else {\n          if (index > 0 && lastIndex < index) {\n            tokens.push({\n              type: this.types.text,\n              value: template.slice(lastIndex, index)\n            });\n          }\n          lastIndex = index + delimiters[0].length;\n          index = template.indexOf(delimiters[1], lastIndex);\n          if (index < 0) {\n            substring = template.slice(lastIndex - delimiters[1].length);\n            lastToken = tokens[tokens.length - 1];\n            if ((lastToken != null ? lastToken.type : void 0) === this.types.text) {\n              lastToken.value += substring;\n            } else {\n              tokens.push({\n                type: this.types.text,\n                value: substring\n              });\n            }\n            break;\n          }\n          value = template.slice(lastIndex, index).trim();\n          tokens.push({\n            type: this.types.binding,\n            value: value\n          });\n          lastIndex = index + delimiters[1].length;\n        }\n      }\n      return tokens;\n    };\n\n    return TextTemplateParser;\n\n  })();\n\n  Rivets.View = (function() {\n    function View(els, models, options) {\n      var k, option, v, _base, _i, _j, _len, _len1, _ref1, _ref2, _ref3, _ref4, _ref5;\n      this.els = els;\n      this.models = models;\n      if (options == null) {\n        options = {};\n      }\n      this.update = __bind(this.update, this);\n      this.publish = __bind(this.publish, this);\n      this.sync = __bind(this.sync, this);\n      this.unbind = __bind(this.unbind, this);\n      this.bind = __bind(this.bind, this);\n      this.select = __bind(this.select, this);\n      this.traverse = __bind(this.traverse, this);\n      this.build = __bind(this.build, this);\n      this.buildBinding = __bind(this.buildBinding, this);\n      this.bindingRegExp = __bind(this.bindingRegExp, this);\n      this.options = __bind(this.options, this);\n      if (!(this.els.jquery || this.els instanceof Array)) {\n        this.els = [this.els];\n      }\n      _ref1 = Rivets.extensions;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        option = _ref1[_i];\n        this[option] = {};\n        if (options[option]) {\n          _ref2 = options[option];\n          for (k in _ref2) {\n            v = _ref2[k];\n            this[option][k] = v;\n          }\n        }\n        _ref3 = Rivets[\"public\"][option];\n        for (k in _ref3) {\n          v = _ref3[k];\n          if ((_base = this[option])[k] == null) {\n            _base[k] = v;\n          }\n        }\n      }\n      _ref4 = Rivets.options;\n      for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {\n        option = _ref4[_j];\n        this[option] = (_ref5 = options[option]) != null ? _ref5 : Rivets[\"public\"][option];\n      }\n      this.build();\n    }\n\n    View.prototype.options = function() {\n      var option, options, _i, _len, _ref1;\n      options = {};\n      _ref1 = Rivets.extensions.concat(Rivets.options);\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        option = _ref1[_i];\n        options[option] = this[option];\n      }\n      return options;\n    };\n\n    View.prototype.bindingRegExp = function() {\n      return new RegExp(\"^\" + this.prefix + \"-\");\n    };\n\n    View.prototype.buildBinding = function(binding, node, type, declaration) {\n      var context, ctx, dependencies, keypath, options, pipe, pipes;\n      options = {};\n      pipes = (function() {\n        var _i, _len, _ref1, _results;\n        _ref1 = declaration.split('|');\n        _results = [];\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          pipe = _ref1[_i];\n          _results.push(pipe.trim());\n        }\n        return _results;\n      })();\n      context = (function() {\n        var _i, _len, _ref1, _results;\n        _ref1 = pipes.shift().split('<');\n        _results = [];\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          ctx = _ref1[_i];\n          _results.push(ctx.trim());\n        }\n        return _results;\n      })();\n      keypath = context.shift();\n      options.formatters = pipes;\n      if (dependencies = context.shift()) {\n        options.dependencies = dependencies.split(/\\s+/);\n      }\n      return this.bindings.push(new Rivets[binding](this, node, type, keypath, options));\n    };\n\n    View.prototype.build = function() {\n      var el, parse, _i, _len, _ref1;\n      this.bindings = [];\n      parse = (function(_this) {\n        return function(node) {\n          var block, childNode, delimiters, n, parser, text, token, tokens, _i, _j, _len, _len1, _ref1, _results;\n          if (node.nodeType === 3) {\n            parser = Rivets.TextTemplateParser;\n            if (delimiters = _this.templateDelimiters) {\n              if ((tokens = parser.parse(node.data, delimiters)).length) {\n                if (!(tokens.length === 1 && tokens[0].type === parser.types.text)) {\n                  for (_i = 0, _len = tokens.length; _i < _len; _i++) {\n                    token = tokens[_i];\n                    text = document.createTextNode(token.value);\n                    node.parentNode.insertBefore(text, node);\n                    if (token.type === 1) {\n                      _this.buildBinding('TextBinding', text, null, token.value);\n                    }\n                  }\n                  node.parentNode.removeChild(node);\n                }\n              }\n            }\n          } else if (node.nodeType === 1) {\n            block = _this.traverse(node);\n          }\n          if (!block) {\n            _ref1 = (function() {\n              var _k, _len1, _ref1, _results1;\n              _ref1 = node.childNodes;\n              _results1 = [];\n              for (_k = 0, _len1 = _ref1.length; _k < _len1; _k++) {\n                n = _ref1[_k];\n                _results1.push(n);\n              }\n              return _results1;\n            })();\n            _results = [];\n            for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n              childNode = _ref1[_j];\n              _results.push(parse(childNode));\n            }\n            return _results;\n          }\n        };\n      })(this);\n      _ref1 = this.els;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        el = _ref1[_i];\n        parse(el);\n      }\n      this.bindings.sort(function(a, b) {\n        var _ref2, _ref3;\n        return (((_ref2 = b.binder) != null ? _ref2.priority : void 0) || 0) - (((_ref3 = a.binder) != null ? _ref3.priority : void 0) || 0);\n      });\n    };\n\n    View.prototype.traverse = function(node) {\n      var attribute, attributes, binder, bindingRegExp, block, identifier, regexp, type, value, _i, _j, _len, _len1, _ref1, _ref2, _ref3;\n      bindingRegExp = this.bindingRegExp();\n      block = node.nodeName === 'SCRIPT' || node.nodeName === 'STYLE';\n      _ref1 = node.attributes;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        attribute = _ref1[_i];\n        if (bindingRegExp.test(attribute.name)) {\n          type = attribute.name.replace(bindingRegExp, '');\n          if (!(binder = this.binders[type])) {\n            _ref2 = this.binders;\n            for (identifier in _ref2) {\n              value = _ref2[identifier];\n              if (identifier !== '*' && identifier.indexOf('*') !== -1) {\n                regexp = new RegExp(\"^\" + (identifier.replace(/\\*/g, '.+')) + \"$\");\n                if (regexp.test(type)) {\n                  binder = value;\n                }\n              }\n            }\n          }\n          binder || (binder = this.binders['*']);\n          if (binder.block) {\n            block = true;\n            attributes = [attribute];\n          }\n        }\n      }\n      _ref3 = attributes || node.attributes;\n      for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n        attribute = _ref3[_j];\n        if (bindingRegExp.test(attribute.name)) {\n          type = attribute.name.replace(bindingRegExp, '');\n          this.buildBinding('Binding', node, type, attribute.value);\n        }\n      }\n      if (!block) {\n        type = node.nodeName.toLowerCase();\n        if (this.components[type] && !node._bound) {\n          this.bindings.push(new Rivets.ComponentBinding(this, node, type));\n          block = true;\n        }\n      }\n      return block;\n    };\n\n    View.prototype.select = function(fn) {\n      var binding, _i, _len, _ref1, _results;\n      _ref1 = this.bindings;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        if (fn(binding)) {\n          _results.push(binding);\n        }\n      }\n      return _results;\n    };\n\n    View.prototype.bind = function() {\n      var binding, _i, _len, _ref1, _results;\n      _ref1 = this.bindings;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        _results.push(binding.bind());\n      }\n      return _results;\n    };\n\n    View.prototype.unbind = function() {\n      var binding, _i, _len, _ref1, _results;\n      _ref1 = this.bindings;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        _results.push(binding.unbind());\n      }\n      return _results;\n    };\n\n    View.prototype.sync = function() {\n      var binding, _i, _len, _ref1, _results;\n      _ref1 = this.bindings;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        _results.push(typeof binding.sync === \"function\" ? binding.sync() : void 0);\n      }\n      return _results;\n    };\n\n    View.prototype.publish = function() {\n      var binding, _i, _len, _ref1, _results;\n      _ref1 = this.select(function(b) {\n        var _ref1;\n        return (_ref1 = b.binder) != null ? _ref1.publishes : void 0;\n      });\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        _results.push(binding.publish());\n      }\n      return _results;\n    };\n\n    View.prototype.update = function(models) {\n      var binding, key, model, _i, _len, _ref1, _results;\n      if (models == null) {\n        models = {};\n      }\n      for (key in models) {\n        model = models[key];\n        this.models[key] = model;\n      }\n      _ref1 = this.bindings;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        _results.push(typeof binding.update === \"function\" ? binding.update(models) : void 0);\n      }\n      return _results;\n    };\n\n    return View;\n\n  })();\n\n  Rivets.Binding = (function() {\n    function Binding(view, el, type, keypath, options) {\n      this.view = view;\n      this.el = el;\n      this.type = type;\n      this.keypath = keypath;\n      this.options = options != null ? options : {};\n      this.getValue = __bind(this.getValue, this);\n      this.update = __bind(this.update, this);\n      this.unbind = __bind(this.unbind, this);\n      this.bind = __bind(this.bind, this);\n      this.publish = __bind(this.publish, this);\n      this.sync = __bind(this.sync, this);\n      this.set = __bind(this.set, this);\n      this.eventHandler = __bind(this.eventHandler, this);\n      this.formattedValue = __bind(this.formattedValue, this);\n      this.parseTarget = __bind(this.parseTarget, this);\n      this.observe = __bind(this.observe, this);\n      this.setBinder = __bind(this.setBinder, this);\n      this.formatters = this.options.formatters || [];\n      this.dependencies = [];\n      this.formatterObservers = {};\n      this.model = void 0;\n      this.setBinder();\n    }\n\n    Binding.prototype.setBinder = function() {\n      var identifier, regexp, value, _ref1;\n      if (!(this.binder = this.view.binders[this.type])) {\n        _ref1 = this.view.binders;\n        for (identifier in _ref1) {\n          value = _ref1[identifier];\n          if (identifier !== '*' && identifier.indexOf('*') !== -1) {\n            regexp = new RegExp(\"^\" + (identifier.replace(/\\*/g, '.+')) + \"$\");\n            if (regexp.test(this.type)) {\n              this.binder = value;\n              this.args = new RegExp(\"^\" + (identifier.replace(/\\*/g, '(.+)')) + \"$\").exec(this.type);\n              this.args.shift();\n            }\n          }\n        }\n      }\n      this.binder || (this.binder = this.view.binders['*']);\n      if (this.binder instanceof Function) {\n        return this.binder = {\n          routine: this.binder\n        };\n      }\n    };\n\n    Binding.prototype.observe = function(obj, keypath, callback) {\n      return Rivets.sightglass(obj, keypath, callback, {\n        root: this.view.rootInterface,\n        adapters: this.view.adapters\n      });\n    };\n\n    Binding.prototype.parseTarget = function() {\n      var token;\n      token = Rivets.TypeParser.parse(this.keypath);\n      if (token.type === 0) {\n        return this.value = token.value;\n      } else {\n        this.observer = this.observe(this.view.models, this.keypath, this.sync);\n        return this.model = this.observer.target;\n      }\n    };\n\n    Binding.prototype.formattedValue = function(value) {\n      var ai, arg, args, fi, formatter, id, observer, processedArgs, _base, _i, _j, _len, _len1, _ref1;\n      _ref1 = this.formatters;\n      for (fi = _i = 0, _len = _ref1.length; _i < _len; fi = ++_i) {\n        formatter = _ref1[fi];\n        args = formatter.match(/[^\\s']+|'([^']|'[^\\s])*'|\"([^\"]|\"[^\\s])*\"/g);\n        id = args.shift();\n        formatter = this.view.formatters[id];\n        args = (function() {\n          var _j, _len1, _results;\n          _results = [];\n          for (_j = 0, _len1 = args.length; _j < _len1; _j++) {\n            arg = args[_j];\n            _results.push(Rivets.TypeParser.parse(arg));\n          }\n          return _results;\n        })();\n        processedArgs = [];\n        for (ai = _j = 0, _len1 = args.length; _j < _len1; ai = ++_j) {\n          arg = args[ai];\n          processedArgs.push(arg.type === 0 ? arg.value : ((_base = this.formatterObservers)[fi] || (_base[fi] = {}), !(observer = this.formatterObservers[fi][ai]) ? (observer = this.observe(this.view.models, arg.value, this.sync), this.formatterObservers[fi][ai] = observer) : void 0, observer.value()));\n        }\n        if ((formatter != null ? formatter.read : void 0) instanceof Function) {\n          value = formatter.read.apply(formatter, [value].concat(__slice.call(processedArgs)));\n        } else if (formatter instanceof Function) {\n          value = formatter.apply(null, [value].concat(__slice.call(processedArgs)));\n        }\n      }\n      return value;\n    };\n\n    Binding.prototype.eventHandler = function(fn) {\n      var binding, handler;\n      handler = (binding = this).view.handler;\n      return function(ev) {\n        return handler.call(fn, this, ev, binding);\n      };\n    };\n\n    Binding.prototype.set = function(value) {\n      var _ref1;\n      value = value instanceof Function && !this.binder[\"function\"] ? this.formattedValue(value.call(this.model)) : this.formattedValue(value);\n      return (_ref1 = this.binder.routine) != null ? _ref1.call(this, this.el, value) : void 0;\n    };\n\n    Binding.prototype.sync = function() {\n      var dependency, observer;\n      return this.set((function() {\n        var _i, _j, _len, _len1, _ref1, _ref2, _ref3;\n        if (this.observer) {\n          if (this.model !== this.observer.target) {\n            _ref1 = this.dependencies;\n            for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n              observer = _ref1[_i];\n              observer.unobserve();\n            }\n            this.dependencies = [];\n            if (((this.model = this.observer.target) != null) && ((_ref2 = this.options.dependencies) != null ? _ref2.length : void 0)) {\n              _ref3 = this.options.dependencies;\n              for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n                dependency = _ref3[_j];\n                observer = this.observe(this.model, dependency, this.sync);\n                this.dependencies.push(observer);\n              }\n            }\n          }\n          return this.observer.value();\n        } else {\n          return this.value;\n        }\n      }).call(this));\n    };\n\n    Binding.prototype.publish = function() {\n      var args, formatter, id, value, _i, _len, _ref1, _ref2, _ref3;\n      if (this.observer) {\n        value = this.getValue(this.el);\n        _ref1 = this.formatters.slice(0).reverse();\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          formatter = _ref1[_i];\n          args = formatter.split(/\\s+/);\n          id = args.shift();\n          if ((_ref2 = this.view.formatters[id]) != null ? _ref2.publish : void 0) {\n            value = (_ref3 = this.view.formatters[id]).publish.apply(_ref3, [value].concat(__slice.call(args)));\n          }\n        }\n        return this.observer.setValue(value);\n      }\n    };\n\n    Binding.prototype.bind = function() {\n      var dependency, observer, _i, _len, _ref1, _ref2, _ref3;\n      this.parseTarget();\n      if ((_ref1 = this.binder.bind) != null) {\n        _ref1.call(this, this.el);\n      }\n      if ((this.model != null) && ((_ref2 = this.options.dependencies) != null ? _ref2.length : void 0)) {\n        _ref3 = this.options.dependencies;\n        for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n          dependency = _ref3[_i];\n          observer = this.observe(this.model, dependency, this.sync);\n          this.dependencies.push(observer);\n        }\n      }\n      if (this.view.preloadData) {\n        return this.sync();\n      }\n    };\n\n    Binding.prototype.unbind = function() {\n      var ai, args, fi, observer, _i, _len, _ref1, _ref2, _ref3, _ref4;\n      if ((_ref1 = this.binder.unbind) != null) {\n        _ref1.call(this, this.el);\n      }\n      if ((_ref2 = this.observer) != null) {\n        _ref2.unobserve();\n      }\n      _ref3 = this.dependencies;\n      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n        observer = _ref3[_i];\n        observer.unobserve();\n      }\n      this.dependencies = [];\n      _ref4 = this.formatterObservers;\n      for (fi in _ref4) {\n        args = _ref4[fi];\n        for (ai in args) {\n          observer = args[ai];\n          observer.unobserve();\n        }\n      }\n      return this.formatterObservers = {};\n    };\n\n    Binding.prototype.update = function(models) {\n      var _ref1, _ref2;\n      if (models == null) {\n        models = {};\n      }\n      this.model = (_ref1 = this.observer) != null ? _ref1.target : void 0;\n      return (_ref2 = this.binder.update) != null ? _ref2.call(this, models) : void 0;\n    };\n\n    Binding.prototype.getValue = function(el) {\n      if (this.binder && (this.binder.getValue != null)) {\n        return this.binder.getValue.call(this, el);\n      } else {\n        return Rivets.Util.getInputValue(el);\n      }\n    };\n\n    return Binding;\n\n  })();\n\n  Rivets.ComponentBinding = (function(_super) {\n    __extends(ComponentBinding, _super);\n\n    function ComponentBinding(view, el, type) {\n      var attribute, bindingRegExp, propertyName, _i, _len, _ref1, _ref2;\n      this.view = view;\n      this.el = el;\n      this.type = type;\n      this.unbind = __bind(this.unbind, this);\n      this.bind = __bind(this.bind, this);\n      this.locals = __bind(this.locals, this);\n      this.component = this.view.components[this.type];\n      this[\"static\"] = {};\n      this.observers = {};\n      this.upstreamObservers = {};\n      bindingRegExp = view.bindingRegExp();\n      _ref1 = this.el.attributes || [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        attribute = _ref1[_i];\n        if (!bindingRegExp.test(attribute.name)) {\n          propertyName = this.camelCase(attribute.name);\n          if (__indexOf.call((_ref2 = this.component[\"static\"]) != null ? _ref2 : [], propertyName) >= 0) {\n            this[\"static\"][propertyName] = attribute.value;\n          } else {\n            this.observers[propertyName] = attribute.value;\n          }\n        }\n      }\n    }\n\n    ComponentBinding.prototype.sync = function() {};\n\n    ComponentBinding.prototype.update = function() {};\n\n    ComponentBinding.prototype.publish = function() {};\n\n    ComponentBinding.prototype.locals = function() {\n      var key, observer, result, value, _ref1, _ref2;\n      result = {};\n      _ref1 = this[\"static\"];\n      for (key in _ref1) {\n        value = _ref1[key];\n        result[key] = value;\n      }\n      _ref2 = this.observers;\n      for (key in _ref2) {\n        observer = _ref2[key];\n        result[key] = observer.value();\n      }\n      return result;\n    };\n\n    ComponentBinding.prototype.camelCase = function(string) {\n      return string.replace(/-([a-z])/g, function(grouped) {\n        return grouped[1].toUpperCase();\n      });\n    };\n\n    ComponentBinding.prototype.bind = function() {\n      var k, key, keypath, observer, option, options, scope, v, _base, _i, _j, _len, _len1, _ref1, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _results;\n      if (!this.bound) {\n        _ref1 = this.observers;\n        for (key in _ref1) {\n          keypath = _ref1[key];\n          this.observers[key] = this.observe(this.view.models, keypath, ((function(_this) {\n            return function(key) {\n              return function() {\n                return _this.componentView.models[key] = _this.observers[key].value();\n              };\n            };\n          })(this)).call(this, key));\n        }\n        this.bound = true;\n      }\n      if (this.componentView != null) {\n        return this.componentView.bind();\n      } else {\n        this.el.innerHTML = this.component.template.call(this);\n        scope = this.component.initialize.call(this, this.el, this.locals());\n        this.el._bound = true;\n        options = {};\n        _ref2 = Rivets.extensions;\n        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {\n          option = _ref2[_i];\n          options[option] = {};\n          if (this.component[option]) {\n            _ref3 = this.component[option];\n            for (k in _ref3) {\n              v = _ref3[k];\n              options[option][k] = v;\n            }\n          }\n          _ref4 = this.view[option];\n          for (k in _ref4) {\n            v = _ref4[k];\n            if ((_base = options[option])[k] == null) {\n              _base[k] = v;\n            }\n          }\n        }\n        _ref5 = Rivets.options;\n        for (_j = 0, _len1 = _ref5.length; _j < _len1; _j++) {\n          option = _ref5[_j];\n          options[option] = (_ref6 = this.component[option]) != null ? _ref6 : this.view[option];\n        }\n        this.componentView = new Rivets.View(this.el, scope, options);\n        this.componentView.bind();\n        _ref7 = this.observers;\n        _results = [];\n        for (key in _ref7) {\n          observer = _ref7[key];\n          _results.push(this.upstreamObservers[key] = this.observe(this.componentView.models, key, ((function(_this) {\n            return function(key, observer) {\n              return function() {\n                return observer.setValue(_this.componentView.models[key]);\n              };\n            };\n          })(this)).call(this, key, observer)));\n        }\n        return _results;\n      }\n    };\n\n    ComponentBinding.prototype.unbind = function() {\n      var key, observer, _ref1, _ref2, _ref3;\n      _ref1 = this.upstreamObservers;\n      for (key in _ref1) {\n        observer = _ref1[key];\n        observer.unobserve();\n      }\n      _ref2 = this.observers;\n      for (key in _ref2) {\n        observer = _ref2[key];\n        observer.unobserve();\n      }\n      return (_ref3 = this.componentView) != null ? _ref3.unbind.call(this) : void 0;\n    };\n\n    return ComponentBinding;\n\n  })(Rivets.Binding);\n\n  Rivets.TextBinding = (function(_super) {\n    __extends(TextBinding, _super);\n\n    function TextBinding(view, el, type, keypath, options) {\n      this.view = view;\n      this.el = el;\n      this.type = type;\n      this.keypath = keypath;\n      this.options = options != null ? options : {};\n      this.sync = __bind(this.sync, this);\n      this.formatters = this.options.formatters || [];\n      this.dependencies = [];\n      this.formatterObservers = {};\n    }\n\n    TextBinding.prototype.binder = {\n      routine: function(node, value) {\n        return node.data = value != null ? value : '';\n      }\n    };\n\n    TextBinding.prototype.sync = function() {\n      return TextBinding.__super__.sync.apply(this, arguments);\n    };\n\n    return TextBinding;\n\n  })(Rivets.Binding);\n\n  Rivets[\"public\"].binders.text = function(el, value) {\n    if (el.textContent != null) {\n      return el.textContent = value != null ? value : '';\n    } else {\n      return el.innerText = value != null ? value : '';\n    }\n  };\n\n  Rivets[\"public\"].binders.html = function(el, value) {\n    return el.innerHTML = value != null ? value : '';\n  };\n\n  Rivets[\"public\"].binders.show = function(el, value) {\n    return el.style.display = value ? '' : 'none';\n  };\n\n  Rivets[\"public\"].binders.hide = function(el, value) {\n    return el.style.display = value ? 'none' : '';\n  };\n\n  Rivets[\"public\"].binders.enabled = function(el, value) {\n    return el.disabled = !value;\n  };\n\n  Rivets[\"public\"].binders.disabled = function(el, value) {\n    return el.disabled = !!value;\n  };\n\n  Rivets[\"public\"].binders.checked = {\n    publishes: true,\n    priority: 2000,\n    bind: function(el) {\n      return Rivets.Util.bindEvent(el, 'change', this.publish);\n    },\n    unbind: function(el) {\n      return Rivets.Util.unbindEvent(el, 'change', this.publish);\n    },\n    routine: function(el, value) {\n      var _ref1;\n      if (el.type === 'radio') {\n        return el.checked = ((_ref1 = el.value) != null ? _ref1.toString() : void 0) === (value != null ? value.toString() : void 0);\n      } else {\n        return el.checked = !!value;\n      }\n    }\n  };\n\n  Rivets[\"public\"].binders.unchecked = {\n    publishes: true,\n    priority: 2000,\n    bind: function(el) {\n      return Rivets.Util.bindEvent(el, 'change', this.publish);\n    },\n    unbind: function(el) {\n      return Rivets.Util.unbindEvent(el, 'change', this.publish);\n    },\n    routine: function(el, value) {\n      var _ref1;\n      if (el.type === 'radio') {\n        return el.checked = ((_ref1 = el.value) != null ? _ref1.toString() : void 0) !== (value != null ? value.toString() : void 0);\n      } else {\n        return el.checked = !value;\n      }\n    }\n  };\n\n  Rivets[\"public\"].binders.value = {\n    publishes: true,\n    priority: 3000,\n    bind: function(el) {\n      if (!(el.tagName === 'INPUT' && el.type === 'radio')) {\n        this.event = el.tagName === 'SELECT' ? 'change' : 'input';\n        return Rivets.Util.bindEvent(el, this.event, this.publish);\n      }\n    },\n    unbind: function(el) {\n      if (!(el.tagName === 'INPUT' && el.type === 'radio')) {\n        return Rivets.Util.unbindEvent(el, this.event, this.publish);\n      }\n    },\n    routine: function(el, value) {\n      var o, _i, _len, _ref1, _ref2, _ref3, _results;\n      if (el.tagName === 'INPUT' && el.type === 'radio') {\n        return el.setAttribute('value', value);\n      } else if (window.jQuery != null) {\n        el = jQuery(el);\n        if ((value != null ? value.toString() : void 0) !== ((_ref1 = el.val()) != null ? _ref1.toString() : void 0)) {\n          return el.val(value != null ? value : '');\n        }\n      } else {\n        if (el.type === 'select-multiple') {\n          if (value != null) {\n            _results = [];\n            for (_i = 0, _len = el.length; _i < _len; _i++) {\n              o = el[_i];\n              _results.push(o.selected = (_ref2 = o.value, __indexOf.call(value, _ref2) >= 0));\n            }\n            return _results;\n          }\n        } else if ((value != null ? value.toString() : void 0) !== ((_ref3 = el.value) != null ? _ref3.toString() : void 0)) {\n          return el.value = value != null ? value : '';\n        }\n      }\n    }\n  };\n\n  Rivets[\"public\"].binders[\"if\"] = {\n    block: true,\n    priority: 4000,\n    bind: function(el) {\n      var attr, declaration;\n      if (this.marker == null) {\n        attr = [this.view.prefix, this.type].join('-').replace('--', '-');\n        declaration = el.getAttribute(attr);\n        this.marker = document.createComment(\" rivets: \" + this.type + \" \" + declaration + \" \");\n        this.bound = false;\n        el.removeAttribute(attr);\n        el.parentNode.insertBefore(this.marker, el);\n        return el.parentNode.removeChild(el);\n      }\n    },\n    unbind: function() {\n      var _ref1;\n      return (_ref1 = this.nested) != null ? _ref1.unbind() : void 0;\n    },\n    routine: function(el, value) {\n      var key, model, models, _ref1;\n      if (!!value === !this.bound) {\n        if (value) {\n          models = {};\n          _ref1 = this.view.models;\n          for (key in _ref1) {\n            model = _ref1[key];\n            models[key] = model;\n          }\n          (this.nested || (this.nested = new Rivets.View(el, models, this.view.options()))).bind();\n          this.marker.parentNode.insertBefore(el, this.marker.nextSibling);\n          return this.bound = true;\n        } else {\n          el.parentNode.removeChild(el);\n          this.nested.unbind();\n          return this.bound = false;\n        }\n      }\n    },\n    update: function(models) {\n      var _ref1;\n      return (_ref1 = this.nested) != null ? _ref1.update(models) : void 0;\n    }\n  };\n\n  Rivets[\"public\"].binders.unless = {\n    block: true,\n    priority: 4000,\n    bind: function(el) {\n      return Rivets[\"public\"].binders[\"if\"].bind.call(this, el);\n    },\n    unbind: function() {\n      return Rivets[\"public\"].binders[\"if\"].unbind.call(this);\n    },\n    routine: function(el, value) {\n      return Rivets[\"public\"].binders[\"if\"].routine.call(this, el, !value);\n    },\n    update: function(models) {\n      return Rivets[\"public\"].binders[\"if\"].update.call(this, models);\n    }\n  };\n\n  Rivets[\"public\"].binders['on-*'] = {\n    \"function\": true,\n    priority: 1000,\n    unbind: function(el) {\n      if (this.handler) {\n        return Rivets.Util.unbindEvent(el, this.args[0], this.handler);\n      }\n    },\n    routine: function(el, value) {\n      if (this.handler) {\n        Rivets.Util.unbindEvent(el, this.args[0], this.handler);\n      }\n      return Rivets.Util.bindEvent(el, this.args[0], this.handler = this.eventHandler(value));\n    }\n  };\n\n  Rivets[\"public\"].binders['each-*'] = {\n    block: true,\n    priority: 4000,\n    bind: function(el) {\n      var attr, view, _i, _len, _ref1;\n      if (this.marker == null) {\n        attr = [this.view.prefix, this.type].join('-').replace('--', '-');\n        this.marker = document.createComment(\" rivets: \" + this.type + \" \");\n        this.iterated = [];\n        el.removeAttribute(attr);\n        el.parentNode.insertBefore(this.marker, el);\n        el.parentNode.removeChild(el);\n      } else {\n        _ref1 = this.iterated;\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          view = _ref1[_i];\n          view.bind();\n        }\n      }\n    },\n    unbind: function(el) {\n      var view, _i, _len, _ref1, _results;\n      if (this.iterated != null) {\n        _ref1 = this.iterated;\n        _results = [];\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          view = _ref1[_i];\n          _results.push(view.unbind());\n        }\n        return _results;\n      }\n    },\n    routine: function(el, collection) {\n      var binding, data, i, index, key, model, modelName, options, previous, template, view, _i, _j, _k, _len, _len1, _len2, _ref1, _ref2, _ref3, _results;\n      modelName = this.args[0];\n      collection = collection || [];\n      if (this.iterated.length > collection.length) {\n        _ref1 = Array(this.iterated.length - collection.length);\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          i = _ref1[_i];\n          view = this.iterated.pop();\n          view.unbind();\n          this.marker.parentNode.removeChild(view.els[0]);\n        }\n      }\n      for (index = _j = 0, _len1 = collection.length; _j < _len1; index = ++_j) {\n        model = collection[index];\n        data = {\n          index: index\n        };\n        data[modelName] = model;\n        if (this.iterated[index] == null) {\n          _ref2 = this.view.models;\n          for (key in _ref2) {\n            model = _ref2[key];\n            if (data[key] == null) {\n              data[key] = model;\n            }\n          }\n          previous = this.iterated.length ? this.iterated[this.iterated.length - 1].els[0] : this.marker;\n          options = this.view.options();\n          options.preloadData = true;\n          template = el.cloneNode(true);\n          view = new Rivets.View(template, data, options);\n          view.bind();\n          this.iterated.push(view);\n          this.marker.parentNode.insertBefore(template, previous.nextSibling);\n        } else if (this.iterated[index].models[modelName] !== model) {\n          this.iterated[index].update(data);\n        }\n      }\n      if (el.nodeName === 'OPTION') {\n        _ref3 = this.view.bindings;\n        _results = [];\n        for (_k = 0, _len2 = _ref3.length; _k < _len2; _k++) {\n          binding = _ref3[_k];\n          if (binding.el === this.marker.parentNode && binding.type === 'value') {\n            _results.push(binding.sync());\n          } else {\n            _results.push(void 0);\n          }\n        }\n        return _results;\n      }\n    },\n    update: function(models) {\n      var data, key, model, view, _i, _len, _ref1, _results;\n      data = {};\n      for (key in models) {\n        model = models[key];\n        if (key !== this.args[0]) {\n          data[key] = model;\n        }\n      }\n      _ref1 = this.iterated;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        view = _ref1[_i];\n        _results.push(view.update(data));\n      }\n      return _results;\n    }\n  };\n\n  Rivets[\"public\"].binders['class-*'] = function(el, value) {\n    var elClass;\n    elClass = \" \" + el.className + \" \";\n    if (!value === (elClass.indexOf(\" \" + this.args[0] + \" \") !== -1)) {\n      return el.className = value ? \"\" + el.className + \" \" + this.args[0] : elClass.replace(\" \" + this.args[0] + \" \", ' ').trim();\n    }\n  };\n\n  Rivets[\"public\"].binders['*'] = function(el, value) {\n    if (value != null) {\n      return el.setAttribute(this.type, value);\n    } else {\n      return el.removeAttribute(this.type);\n    }\n  };\n\n  Rivets[\"public\"].adapters['.'] = {\n    id: '_rv',\n    counter: 0,\n    weakmap: {},\n    weakReference: function(obj) {\n      var id, _base, _name;\n      if (!obj.hasOwnProperty(this.id)) {\n        id = this.counter++;\n        Object.defineProperty(obj, this.id, {\n          value: id\n        });\n      }\n      return (_base = this.weakmap)[_name = obj[this.id]] || (_base[_name] = {\n        callbacks: {}\n      });\n    },\n    cleanupWeakReference: function(ref, id) {\n      if (!Object.keys(ref.callbacks).length) {\n        if (!(ref.pointers && Object.keys(ref.pointers).length)) {\n          return delete this.weakmap[id];\n        }\n      }\n    },\n    stubFunction: function(obj, fn) {\n      var map, original, weakmap;\n      original = obj[fn];\n      map = this.weakReference(obj);\n      weakmap = this.weakmap;\n      return obj[fn] = function() {\n        var callback, k, r, response, _i, _len, _ref1, _ref2, _ref3, _ref4;\n        response = original.apply(obj, arguments);\n        _ref1 = map.pointers;\n        for (r in _ref1) {\n          k = _ref1[r];\n          _ref4 = (_ref2 = (_ref3 = weakmap[r]) != null ? _ref3.callbacks[k] : void 0) != null ? _ref2 : [];\n          for (_i = 0, _len = _ref4.length; _i < _len; _i++) {\n            callback = _ref4[_i];\n            callback();\n          }\n        }\n        return response;\n      };\n    },\n    observeMutations: function(obj, ref, keypath) {\n      var fn, functions, map, _base, _i, _len;\n      if (Array.isArray(obj)) {\n        map = this.weakReference(obj);\n        if (map.pointers == null) {\n          map.pointers = {};\n          functions = ['push', 'pop', 'shift', 'unshift', 'sort', 'reverse', 'splice'];\n          for (_i = 0, _len = functions.length; _i < _len; _i++) {\n            fn = functions[_i];\n            this.stubFunction(obj, fn);\n          }\n        }\n        if ((_base = map.pointers)[ref] == null) {\n          _base[ref] = [];\n        }\n        if (__indexOf.call(map.pointers[ref], keypath) < 0) {\n          return map.pointers[ref].push(keypath);\n        }\n      }\n    },\n    unobserveMutations: function(obj, ref, keypath) {\n      var idx, map, pointers;\n      if (Array.isArray(obj) && (obj[this.id] != null)) {\n        if (map = this.weakmap[obj[this.id]]) {\n          if (pointers = map.pointers[ref]) {\n            if ((idx = pointers.indexOf(keypath)) >= 0) {\n              pointers.splice(idx, 1);\n            }\n            if (!pointers.length) {\n              delete map.pointers[ref];\n            }\n            return this.cleanupWeakReference(map, obj[this.id]);\n          }\n        }\n      }\n    },\n    observe: function(obj, keypath, callback) {\n      var callbacks, desc, value;\n      callbacks = this.weakReference(obj).callbacks;\n      if (callbacks[keypath] == null) {\n        callbacks[keypath] = [];\n        desc = Object.getOwnPropertyDescriptor(obj, keypath);\n        if (!((desc != null ? desc.get : void 0) || (desc != null ? desc.set : void 0))) {\n          value = obj[keypath];\n          Object.defineProperty(obj, keypath, {\n            enumerable: true,\n            get: function() {\n              return value;\n            },\n            set: (function(_this) {\n              return function(newValue) {\n                var map, _i, _len, _ref1;\n                if (newValue !== value) {\n                  _this.unobserveMutations(value, obj[_this.id], keypath);\n                  value = newValue;\n                  if (map = _this.weakmap[obj[_this.id]]) {\n                    callbacks = map.callbacks;\n                    if (callbacks[keypath]) {\n                      _ref1 = callbacks[keypath].slice();\n                      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n                        callback = _ref1[_i];\n                        if (__indexOf.call(callbacks[keypath], callback) >= 0) {\n                          callback();\n                        }\n                      }\n                    }\n                    return _this.observeMutations(newValue, obj[_this.id], keypath);\n                  }\n                }\n              };\n            })(this)\n          });\n        }\n      }\n      if (__indexOf.call(callbacks[keypath], callback) < 0) {\n        callbacks[keypath].push(callback);\n      }\n      return this.observeMutations(obj[keypath], obj[this.id], keypath);\n    },\n    unobserve: function(obj, keypath, callback) {\n      var callbacks, idx, map;\n      if (map = this.weakmap[obj[this.id]]) {\n        if (callbacks = map.callbacks[keypath]) {\n          if ((idx = callbacks.indexOf(callback)) >= 0) {\n            callbacks.splice(idx, 1);\n            if (!callbacks.length) {\n              delete map.callbacks[keypath];\n            }\n          }\n          this.unobserveMutations(obj[keypath], obj[this.id], keypath);\n          return this.cleanupWeakReference(map, obj[this.id]);\n        }\n      }\n    },\n    get: function(obj, keypath) {\n      return obj[keypath];\n    },\n    set: function(obj, keypath, value) {\n      return obj[keypath] = value;\n    }\n  };\n\n  Rivets.factory = function(sightglass) {\n    Rivets.sightglass = sightglass;\n    Rivets[\"public\"]._ = Rivets;\n    return Rivets[\"public\"];\n  };\n\n  if (typeof (typeof module !== \"undefined\" && module !== null ? module.exports : void 0) === 'object') {\n    module.exports = Rivets.factory(require('sightglass'));\n  } else if (typeof define === 'function' && define.amd) {\n    define(['sightglass'], function(sightglass) {\n      return this.rivets = Rivets.factory(sightglass);\n    });\n  } else {\n    this.rivets = Rivets.factory(sightglass);\n  }\n\n}).call(this);\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/rivets/dist/rivets.js\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** (webpack)/buildin/module.js\n **/","(function() {\n  // Public sightglass interface.\n  function sightglass(obj, keypath, callback, options) {\n    return new Observer(obj, keypath, callback, options)\n  }\n\n  // Batteries not included.\n  sightglass.adapters = {}\n\n  // Constructs a new keypath observer and kicks things off.\n  function Observer(obj, keypath, callback, options) {\n    this.options = options || {}\n    this.options.adapters = this.options.adapters || {}\n    this.obj = obj\n    this.keypath = keypath\n    this.callback = callback\n    this.objectPath = []\n    this.parse()\n\n    if (isObject(this.target = this.realize())) {\n      this.set(true, this.key, this.target, this.callback)\n    }\n  }\n\n  // Tokenizes the provided keypath string into interface + path tokens for the\n  // observer to work with.\n  Observer.tokenize = function(keypath, interfaces, root) {\n    var tokens = []\n    var current = {i: root, path: ''}\n    var index, chr\n\n    for (index = 0; index < keypath.length; index++) {\n      chr = keypath.charAt(index)\n\n      if (!!~interfaces.indexOf(chr)) {\n        tokens.push(current)\n        current = {i: chr, path: ''}\n      } else {\n        current.path += chr\n      }\n    }\n\n    tokens.push(current)\n    return tokens\n  }\n\n  // Parses the keypath using the interfaces defined on the view. Sets variables\n  // for the tokenized keypath as well as the end key.\n  Observer.prototype.parse = function() {\n    var interfaces = this.interfaces()\n    var root, path\n\n    if (!interfaces.length) {\n      error('Must define at least one adapter interface.')\n    }\n\n    if (!!~interfaces.indexOf(this.keypath[0])) {\n      root = this.keypath[0]\n      path = this.keypath.substr(1)\n    } else {\n      if (typeof (root = this.options.root || sightglass.root) === 'undefined') {\n        error('Must define a default root adapter.')\n      }\n\n      path = this.keypath\n    }\n\n    this.tokens = Observer.tokenize(path, interfaces, root)\n    this.key = this.tokens.pop()\n  }\n\n  // Realizes the full keypath, attaching observers for every key and correcting\n  // old observers to any changed objects in the keypath.\n  Observer.prototype.realize = function() {\n    var current = this.obj\n    var unreached = false\n    var prev\n\n    this.tokens.forEach(function(token, index) {\n      if (isObject(current)) {\n        if (typeof this.objectPath[index] !== 'undefined') {\n          if (current !== (prev = this.objectPath[index])) {\n            this.set(false, token, prev, this.update.bind(this))\n            this.set(true, token, current, this.update.bind(this))\n            this.objectPath[index] = current\n          }\n        } else {\n          this.set(true, token, current, this.update.bind(this))\n          this.objectPath[index] = current\n        }\n\n        current = this.get(token, current)\n      } else {\n        if (unreached === false) {\n          unreached = index\n        }\n\n        if (prev = this.objectPath[index]) {\n          this.set(false, token, prev, this.update.bind(this))\n        }\n      }\n    }, this)\n\n    if (unreached !== false) {\n      this.objectPath.splice(unreached)\n    }\n\n    return current\n  }\n\n  // Updates the keypath. This is called when any intermediary key is changed.\n  Observer.prototype.update = function() {\n    var next, oldValue\n\n    if ((next = this.realize()) !== this.target) {\n      if (isObject(this.target)) {\n        this.set(false, this.key, this.target, this.callback)\n      }\n\n      if (isObject(next)) {\n        this.set(true, this.key, next, this.callback)\n      }\n\n      oldValue = this.value()\n      this.target = next\n\n      if (this.value() !== oldValue) this.callback()\n    }\n  }\n\n  // Reads the current end value of the observed keypath. Returns undefined if\n  // the full keypath is unreachable.\n  Observer.prototype.value = function() {\n    if (isObject(this.target)) {\n      return this.get(this.key, this.target)\n    }\n  }\n\n  // Sets the current end value of the observed keypath. Calling setValue when\n  // the full keypath is unreachable is a no-op.\n  Observer.prototype.setValue = function(value) {\n    if (isObject(this.target)) {\n      this.adapter(this.key).set(this.target, this.key.path, value)\n    }\n  }\n\n  // Gets the provided key on an object.\n  Observer.prototype.get = function(key, obj) {\n    return this.adapter(key).get(obj, key.path)\n  }\n\n  // Observes or unobserves a callback on the object using the provided key.\n  Observer.prototype.set = function(active, key, obj, callback) {\n    var action = active ? 'observe' : 'unobserve'\n    this.adapter(key)[action](obj, key.path, callback)\n  }\n\n  // Returns an array of all unique adapter interfaces available.\n  Observer.prototype.interfaces = function() {\n    var interfaces = Object.keys(this.options.adapters)\n\n    Object.keys(sightglass.adapters).forEach(function(i) {\n      if (!~interfaces.indexOf(i)) {\n        interfaces.push(i)\n      }\n    })\n\n    return interfaces\n  }\n\n  // Convenience function to grab the adapter for a specific key.\n  Observer.prototype.adapter = function(key) {\n    return this.options.adapters[key.i] ||\n      sightglass.adapters[key.i]\n  }\n\n  // Unobserves the entire keypath.\n  Observer.prototype.unobserve = function() {\n    var obj\n\n    this.tokens.forEach(function(token, index) {\n      if (obj = this.objectPath[index]) {\n        this.set(false, token, obj, this.update.bind(this))\n      }\n    }, this)\n\n    if (isObject(this.target)) {\n      this.set(false, this.key, this.target, this.callback)\n    }\n  }\n\n  // Check if a value is an object than can be observed.\n  function isObject(obj) {\n    return typeof obj === 'object' && obj !== null\n  }\n\n  // Error thrower.\n  function error(message) {\n    throw new Error('[sightglass] ' + message)\n  }\n\n  // Export module for Node and the browser.\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = sightglass\n  } else if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return this.sightglass = sightglass\n    })\n  } else {\n    this.sightglass = sightglass\n  }\n}).call(this);\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/rivets/~/sightglass/index.js\n **/","import $ from 'jquery';\nimport prestashop from 'prestashop';\n\nfunction setupRegularCheckout () {\n  function hideSubmitButton () {\n    $('#conditions-to-approve button').hide();\n    $('#delivery-method button').hide();\n  }\n\n  function refreshPaymentOptions () {\n    let params = $('#conditions-to-approve').serialize() + '&action=getPaymentOptions';\n    $.post('', params).then(resp => {\n      $('#payment-options').replaceWith(resp);\n      hideSubmitButton();\n    });\n  }\n\n  function refreshDeliveryOptions () {\n    let params = $('#delivery-method').serialize() + '&action=selectDeliveryOption';\n    $.post('', params).then(resp => {\n      $('#delivery-options').replaceWith(resp);\n      prestashop.emit('cart updated');\n      hideSubmitButton();\n    });\n  }\n\n  hideSubmitButton();\n  $('body').on('change', '#conditions-to-approve input[type=\"checkbox\"]', refreshPaymentOptions);\n  $('body').on('change', '#delivery-method input[type=\"radio\"]', refreshDeliveryOptions);\n\n\n}\n\nfunction setupAdvancedCheckout () {\n  function getSelectedPaymentOption () {\n    return $('#payment-options input[name=\"advanced-payment-option\"]:checked').attr('id');\n  }\n\n  function enableOrDisableOrderButton () {\n    var show = true;\n    $('#conditions-to-approve input[type=\"checkbox\"]').each((_, checkbox) => {\n      if (!checkbox.checked) {\n        show = false;\n      }\n    });\n\n    if (!getSelectedPaymentOption()) {\n      show = false;\n    }\n\n    $('#payment-confirmation button').attr('disabled', !show);\n  }\n\n  function confirmPayment () {\n    var option = getSelectedPaymentOption();\n    if (option) {\n      $('#pay-with-' + option + '-form').submit();\n    }\n  }\n\n  $('#payment-confirmation button').on('click', function () {\n    confirmPayment();\n  });\n\n\n  $('#payment-options input[type=\"checkbox\"][disabled]').attr('disabled', false);\n  $('body').on('change', '#conditions-to-approve input[type=\"checkbox\"]', enableOrDisableOrderButton);\n  $('body').on('change', 'input[name=\"advanced-payment-option\"]', enableOrDisableOrderButton);\n}\n\n$(document).ready(function setupCheckoutScripts () {\n  if (!$('body#order-opc')) {\n    return;\n  }\n\n  prestashop.on('cart updated', function () {\n    $.get('', {\n      action: 'getCartSummary'\n    }).then(resp => {\n      $('#cart-summary').html(resp);\n    });\n  });\n\n  if ($('#payment-options').data('uses-advanced-payment-api')) {\n    setupAdvancedCheckout();\n  } else {\n    setupRegularCheckout();\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/checkout.js\n **/","import $ from 'jquery';\n\nfunction replaceProducts (html) {\n  $('#products').replaceWith(html);\n  $('.ps-hidden-by-js').hide();\n}\n\nfunction refreshProducts (extraParams) {\n  extraParams  = extraParams || '';\n  const params = $('#navigation').serialize() + extraParams;\n  const url    = window.location.href.split(\"?\")[0];\n  $.post(url, params, null, 'json').then(resp => {\n    replaceProducts(resp.products);\n    window.history.pushState({products: resp.products}, undefined, resp.query_url);\n    window.onpopstate = function (e) {\n      if (e.state && e.state.products) {\n        replaceProducts(e.state.products);\n      }\n    };\n  });\n}\n\n$(document).ready(function () {\n  $('body').on('change', '#navigation input', function () {\n    refreshProducts();\n  });\n\n  $('body').on('click', '#products button[name=\"page\"]', function (event) {\n    event.preventDefault();\n    const page = $(event.target).attr('value');\n    refreshProducts('&page=' + page);\n  });\n\n    $('body').on('click', '#products button[name=\"sort_option\"]', function (event) {\n      event.preventDefault();\n      const option = $(event.target).attr('value');\n      refreshProducts('&sort_option=' + option);\n    });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/product-navigation.js\n **/"],"sourceRoot":""}